(self.webpackChunk_crownfi_sei_swaps_webapp=self.webpackChunk_crownfi_sei_swaps_webapp||[]).push([[412],{11159:(e,t,s)=>{"use strict";s.d(t,{main:()=>Rs});var n,i,a,r,o,l,c,h,d,u,f,p,m,w,g,v,b,k,x,y=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},T=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class C{constructor(e){n.set(this,void 0),i.set(this,void 0),a.set(this,void 0),r.set(this,void 0),y(this,n,e,"f")}get heading(){return void 0===T(this,i,"f")&&y(this,i,T(this,n,"f").querySelector('[cewt-ref="heading"]:not(:scope [is] *)'),"f"),T(this,i,"f")}get message(){return void 0===T(this,a,"f")&&y(this,a,T(this,n,"f").querySelector('[cewt-ref="message"]:not(:scope [is] *)'),"f"),T(this,a,"f")}get dismissBtn(){return void 0===T(this,r,"f")&&y(this,r,T(this,n,"f").querySelector('[cewt-ref="dismiss-btn"]:not(:scope [is] *)'),"f"),T(this,r,"f")}}n=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakMap;let E=null;class M extends HTMLDialogElement{static get observedAttributes(){return["heading","message"]}get heading(){return T(this,o,"f")}set heading(e){null==e?this.removeAttribute("heading"):this.setAttribute("heading",e)}onHeadingChanged(e,t){}get message(){return T(this,l,"f")}set message(e){null==e?this.removeAttribute("message"):this.setAttribute("message",e)}onMessageChanged(e,t){}attributeChangedCallback(e,t,s){switch(e){case"heading":y(this,o,s,"f"),this.onHeadingChanged(t,s);break;case"message":y(this,l,s,"f"),this.onMessageChanged(t,s)}}constructor(){super(),o.set(this,null),l.set(this,null),0==this.childElementCount&&this.appendChild((null==E&&(E=document.createElement("template"),E.innerHTML='\n\t<h1 cewt-ref="heading">null</h1>\n\t<p cewt-ref="message">null</p>\n\t<button cewt-ref="dismiss-btn">OK</button>\n'),E).content.cloneNode(!0)),this.setAttribute("is","popup-modal"),this.refs=new C(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("popup-modal",this,{extends:"dialog"})}}o=new WeakMap,l=new WeakMap;class S{constructor(e){c.set(this,void 0),h.set(this,void 0),d.set(this,void 0),u.set(this,void 0),f.set(this,void 0),y(this,c,e,"f")}get heading(){return void 0===T(this,h,"f")&&y(this,h,T(this,c,"f").querySelector('[cewt-ref="heading"]:not(:scope [is] *)'),"f"),T(this,h,"f")}get message(){return void 0===T(this,d,"f")&&y(this,d,T(this,c,"f").querySelector('[cewt-ref="message"]:not(:scope [is] *)'),"f"),T(this,d,"f")}get errorDetails(){return void 0===T(this,u,"f")&&y(this,u,T(this,c,"f").querySelector('[cewt-ref="error-details"]:not(:scope [is] *)'),"f"),T(this,u,"f")}get dismissBtn(){return void 0===T(this,f,"f")&&y(this,f,T(this,c,"f").querySelector('[cewt-ref="dismiss-btn"]:not(:scope [is] *)'),"f"),T(this,f,"f")}}c=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,f=new WeakMap;let L=null;class W extends HTMLDialogElement{static get observedAttributes(){return["message","details","heading"]}get message(){return T(this,p,"f")}set message(e){null==e?this.removeAttribute("message"):this.setAttribute("message",e)}onMessageChanged(e,t){}get details(){return T(this,m,"f")}set details(e){null==e?this.removeAttribute("details"):this.setAttribute("details",e)}onDetailsChanged(e,t){}get heading(){return T(this,w,"f")}set heading(e){null==e?this.removeAttribute("heading"):this.setAttribute("heading",e)}onHeadingChanged(e,t){}attributeChangedCallback(e,t,s){switch(e){case"message":y(this,p,s,"f"),this.onMessageChanged(t,s);break;case"details":y(this,m,s,"f"),this.onDetailsChanged(t,s);break;case"heading":y(this,w,s,"f"),this.onHeadingChanged(t,s)}}constructor(){super(),p.set(this,null),m.set(this,null),w.set(this,null),0==this.childElementCount&&this.appendChild((null==L&&(L=document.createElement("template"),L.innerHTML='\n\t<h1 cewt-ref="heading">null</h1>\n\t<p cewt-ref="message">null</p>\n\t<textarea readonly="" cewt-ref="error-details"></textarea>\n\t<button cewt-ref="dismiss-btn">OK</button>\n'),L).content.cloneNode(!0)),this.setAttribute("is","error-modal"),this.refs=new S(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("error-modal",this,{extends:"dialog"})}}p=new WeakMap,m=new WeakMap,w=new WeakMap;class P{constructor(e){g.set(this,void 0),v.set(this,void 0),b.set(this,void 0),y(this,g,e,"f")}get txLink(){return void 0===T(this,v,"f")&&y(this,v,T(this,g,"f").querySelector('[cewt-ref="tx-link"]:not(:scope [is] *)'),"f"),T(this,v,"f")}get dismissBtn(){return void 0===T(this,b,"f")&&y(this,b,T(this,g,"f").querySelector('[cewt-ref="dismiss-btn"]:not(:scope [is] *)'),"f"),T(this,b,"f")}}g=new WeakMap,v=new WeakMap,b=new WeakMap;let q=null;class I extends HTMLDialogElement{static get observedAttributes(){return["txhash","chain"]}get txhash(){return T(this,k,"f")}set txhash(e){null==e?this.removeAttribute("txhash"):this.setAttribute("txhash",e)}onTxhashChanged(e,t){}get chain(){return T(this,x,"f")}set chain(e){null==e?this.removeAttribute("chain"):this.setAttribute("chain",e)}onChainChanged(e,t){}attributeChangedCallback(e,t,s){switch(e){case"txhash":y(this,k,s,"f"),this.onTxhashChanged(t,s);break;case"chain":y(this,x,s,"f"),this.onChainChanged(t,s)}}constructor(){super(),k.set(this,null),x.set(this,null),0==this.childElementCount&&this.appendChild((null==q&&(q=document.createElement("template"),q.innerHTML='\n\t<h1>Transaction confirmed</h1>\n\t<p>Your transaction has been successfully processed.</p>\n\t<p><a target="_blank" cewt-ref="tx-link" href="https://www.seiscan.app/">You may view its details here.</a></p>\n\t<button cewt-ref="dismiss-btn">OK</button>\n'),q).content.cloneNode(!0)),this.setAttribute("is","tx-confirmed-modal"),this.refs=new P(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("tx-confirmed-modal",this,{extends:"dialog"})}}k=new WeakMap,x=new WeakMap;class _ extends M{constructor(e){super(),e&&(this.heading=e.heading,this.message=e.message),this.untilCloseCallback=()=>{},this.untilClosed=new Promise((e=>{this.untilCloseCallback=e})),this.addEventListener("close",(e=>{this.remove()})),this.refs.dismissBtn.onclick=()=>{this.close()}}onHeadingChanged(e,t){this.refs.heading.innerText=t+""}onMessageChanged(e,t){this.refs.message.innerText=t+""}connectedCallback(){this.showModal()}disconnectedCallback(){this.untilCloseCallback(),this.untilClosed=new Promise((e=>{this.untilCloseCallback=e}))}}_.registerElement();var B=s(79840);class D extends W{constructor(e){super(),e&&(this.heading=e.heading,this.message=e.message,this.refs.errorDetails.value=e.details+""),this.untilCloseCallback=()=>{},this.untilClosed=new Promise((e=>{this.untilCloseCallback=e})),this.addEventListener("close",(e=>{this.remove()})),this.refs.dismissBtn.onclick=()=>{this.close()}}onHeadingChanged(e,t){this.refs.heading.innerText=t+""}onMessageChanged(e,t){this.refs.message.innerText=t+""}onDetailsChanged(e,t){this.refs.errorDetails.value=t+""}connectedCallback(){this.showModal(),this.refs.errorDetails.scrollTo({top:0,behavior:"instant"}),this.refs.errorDetails.scrollTop=0,setTimeout((()=>{this.refs.errorDetails.scrollTo({top:0,behavior:"instant"}),this.refs.errorDetails.scrollTop=0}),1)}disconnectedCallback(){this.untilCloseCallback(),this.untilClosed=new Promise((e=>{this.untilCloseCallback=e}))}}function A(e){e().catch((e=>{console.error(e),async function(e){const t=(()=>{if("string"==typeof e.name&&"string"==typeof e.message){if((0,B.Mm)(e)){const t=(0,B.Z5)(e.message);if(t){const{messageIndex:s,errorSource:n,errorDetail:i}=t;return new D({heading:"Transaction Execution Error",message:"Message #"+s+" failed.\n"+n+": "+i,details:"--error details--\nname: "+e.name+"\nmessage: "+(e.message+"").replace(/\t/g,"    ")+"\nstack: "+(e.stack+"").replace(/\t/g,"    ")+"\n\n\n--properties--\n"+JSON.stringify(e,void 0,"    ")})}return new D({heading:"RPC Error",message:e.message,details:"--error details--\nname: "+e.name+"\nmessage: "+(e.message+"").replace(/\t/g,"    ")+"\nstack: "+(e.stack+"").replace(/\t/g,"    ")+"\n\n\n--properties--\n"+JSON.stringify(e,void 0,"    ")})}return new D({heading:e.name,message:e.message,details:"--error details--\nname: "+e.name+"\nmessage: "+(e.message+"").replace(/\t/g,"    ")+"\nstack: "+(e.stack+"").replace(/\t/g,"    ")+"\n\n\n--properties--\n"+JSON.stringify(e,void 0,"    ")})}return new D({heading:"Non-error error",message:"An unknown error has occurred. Potentially useful details are below",details:"--error details--\n"+e+"\n\n--properties--\n"+JSON.stringify(e,void 0,"    ")})})();document.body.appendChild(t),await t.untilClosed}(e)}))}D.registerElement();var H,N,z,O=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},R=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class F extends I{constructor(e){super(),H.add(this),N.set(this,void 0),e&&(this.chain=e.chain,this.txhash=e.txhash),O(this,N,(()=>{}),"f"),this.untilClosed=new Promise((e=>{O(this,N,e,"f")})),this.addEventListener("close",(e=>{this.remove()})),this.refs.dismissBtn.onclick=()=>{this.close()}}onChainChanged(e,t){R(this,H,"m",z).call(this)}onTxhashChanged(e,t){R(this,H,"m",z).call(this)}connectedCallback(){this.showModal()}disconnectedCallback(){R(this,N,"f").call(this),this.untilClosed=new Promise((e=>{O(this,N,e,"f")}))}}N=new WeakMap,H=new WeakSet,z=function(){this.refs.txLink.href=`https://www.seiscan.app/${encodeURIComponent(this.chain+"")}/txs/${encodeURIComponent(this.txhash+"")}`},F.registerElement(),B.Zm.on("transactionConfirmed",(e=>{const t=new F({chain:e.chainId,txhash:e.result.transactionHash});document.body.appendChild(t)}));const j=document.querySelector.bind(document),V=document.querySelectorAll.bind(document);function J(e,t=""){const s=j("#loading-cover"),n=j("#loading-text");e?(s.style.display="",n&&(n.innerText=t)):(s.style.display="none",n&&(n.innerText=""))}var Z,U,G,Y,Q,K,$,X,ee,te,se,ne,ie=s(62430),ae=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},re=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class oe{constructor(e){Z.set(this,void 0),ae(this,Z,e,"f")}}Z=new WeakMap;let le=null;class ce extends HTMLButtonElement{static get observedAttributes(){return["wallet-address"]}get walletAddress(){return re(this,U,"f")}set walletAddress(e){null==e?this.removeAttribute("wallet-address"):this.setAttribute("wallet-address",e)}onWalletAddressChanged(e,t){}attributeChangedCallback(e,t,s){"wallet-address"===e&&(ae(this,U,s,"f"),this.onWalletAddressChanged(t,s))}constructor(){super(),U.set(this,null),0==this.childElementCount&&this.appendChild((null==le&&(le=document.createElement("template"),le.innerHTML="\n\tConnect wallet\n"),le).content.cloneNode(!0)),this.setAttribute("is","wallet-button"),this.refs=new oe(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("wallet-button",this,{extends:"button"})}}U=new WeakMap;class he{constructor(e){G.set(this,void 0),Y.set(this,void 0),Q.set(this,void 0),ae(this,G,e,"f")}get img(){return void 0===re(this,Y,"f")&&ae(this,Y,re(this,G,"f").querySelector('[cewt-ref="img"]:not(:scope [is] *)'),"f"),re(this,Y,"f")}get text(){return void 0===re(this,Q,"f")&&ae(this,Q,re(this,G,"f").querySelector('[cewt-ref="text"]:not(:scope [is] *)'),"f"),re(this,Q,"f")}}G=new WeakMap,Y=new WeakMap,Q=new WeakMap;let de=null;class ue extends HTMLButtonElement{static get observedAttributes(){return["text","icon"]}get text(){return re(this,K,"f")}set text(e){null==e?this.removeAttribute("text"):this.setAttribute("text",e)}onTextChanged(e,t){}get icon(){return re(this,$,"f")}set icon(e){null==e?this.removeAttribute("icon"):this.setAttribute("icon",e)}onIconChanged(e,t){}attributeChangedCallback(e,t,s){switch(e){case"text":ae(this,K,s,"f"),this.onTextChanged(t,s);break;case"icon":ae(this,$,s,"f"),this.onIconChanged(t,s)}}constructor(){super(),K.set(this,null),$.set(this,null),0==this.childElementCount&&this.appendChild((null==de&&(de=document.createElement("template"),de.innerHTML='\n\t<img cewt-ref="img" src="/assets/lazy-load.svg">\n\t<span cewt-ref="text">Generiwallet</span>\n'),de).content.cloneNode(!0)),this.setAttribute("is","wallet-choice"),this.refs=new he(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("wallet-choice",this,{extends:"button"})}}K=new WeakMap,$=new WeakMap;class fe{constructor(e){X.set(this,void 0),ee.set(this,void 0),te.set(this,void 0),se.set(this,void 0),ne.set(this,void 0),ae(this,X,e,"f")}get heading(){return void 0===re(this,ee,"f")&&ae(this,ee,re(this,X,"f").querySelector('[cewt-ref="heading"]:not(:scope [is] *)'),"f"),re(this,ee,"f")}get selectedNetwork(){return void 0===re(this,te,"f")&&ae(this,te,re(this,X,"f").querySelector('[cewt-ref="selected-network"]:not(:scope [is] *)'),"f"),re(this,te,"f")}get choices(){return void 0===re(this,se,"f")&&ae(this,se,re(this,X,"f").querySelector('[cewt-ref="choices"]:not(:scope [is] *)'),"f"),re(this,se,"f")}get cancelButton(){return void 0===re(this,ne,"f")&&ae(this,ne,re(this,X,"f").querySelector('[cewt-ref="cancel-button"]:not(:scope [is] *)'),"f"),re(this,ne,"f")}}X=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap;let pe=null;class me extends HTMLDialogElement{constructor(){super(),0==this.childElementCount&&this.appendChild((null==pe&&(pe=document.createElement("template"),pe.innerHTML='\n\t<h1 cewt-ref="heading">Choose wallet</h1>\n\t<select cewt-ref="selected-network">\n\t\t<option value="pacific-1">Mainnet (pacific-1)</option>\n\t\t<option value="atlantic-2">Testnet (atlantic-2)</option>\n\t\t<option value="sei-chain">Localnet (sei-chain)</option>\n\t</select>\n\t<div class="wallet-choices" cewt-ref="choices">\n\n\t</div>\n\t<button cewt-ref="cancel-button">Cancel</button>\n'),pe).content.cloneNode(!0)),this.setAttribute("is","wallet-modal"),this.refs=new fe(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("wallet-modal",this,{extends:"dialog"})}}function we(e,t){return{amount:e.toString(),info:ve(t)}}function ge(e){return"token"in e?"cw20/"+e.token.contract_addr:e.native_token.denom}function ve(e){return e.startsWith("cw20/")?{token:{contract_addr:e.substring(5)}}:{native_token:{denom:e}}}class be extends B.xq{queryConfig(){return this.query({config:{}})}queryPair(e){const t={pair:e};return this.query(t)}queryPairs(e={}){const t={pairs:e};return this.query(t)}queryFeeInfo(e){const t={fee_info:e};return this.query(t)}queryBlacklistedPairTypes(){return this.query({blacklisted_pair_types:{}})}buildUpdateConfigIx(e={},t){const s={update_config:e};return this.executeIx(s,t)}buildUpdatePairConfigIx(e,t){const s={update_pair_config:e};return this.executeIx(s,t)}buildCreatePairIx(e,t){const s={create_pair:e};return this.executeIx(s,t)}buildDeregisterIx(e,t){const s={deregister:e};return this.executeIx(s,t)}buildProposeNewOwnerIx(e,t){const s={propose_new_owner:e};return this.executeIx(s,t)}buildDropOwnershipProposalIx(e){return this.executeIx({drop_ownership_proposal:{}},e)}buildClaimOwnershipIx(e){return this.executeIx({claim_ownership:{}},e)}}class ke extends B.xq{queryPair(){return this.query({pair:{}})}queryPool(){return this.query({pool:{}})}queryConfig(){return this.query({config:{}})}queryShare(e){const t={share:e};return this.query(t)}querySimulation(e){const t={simulation:e};return this.query(t)}queryReverseSimulation(e){const t={reverse_simulation:e};return this.query(t)}queryCumulativePrices(){return this.query({cumulative_prices:{}})}queryQueryComputeD(){return this.query({query_compute_d:{}})}queryAssetBalanceAt(e){const t={asset_balance_at:e};return this.query(t)}buildReceiveIx(e,t){const s={receive:e};return this.executeIx(s,t)}buildProvideLiquidityIx(e,t){const s={provide_liquidity:e};return this.executeIx(s,t)}buildSwapIx(e,t){const s={swap:e};return this.executeIx(s,t)}buildUpdateConfigIx(e,t){const s={update_config:e};return this.executeIx(s,t)}buildProposeNewOwnerIx(e,t){const s={propose_new_owner:e};return this.executeIx(s,t)}buildDropOwnershipProposalIx(e){return this.executeIx({drop_ownership_proposal:{}},e)}buildClaimOwnershipIx(e){return this.executeIx({claim_ownership:{}},e)}buildSwapCw20Ix(e,t,s={}){const n={swap:s};return this.executeIxCw20(n,e,t)}buildWithdrawLiquidityCw20Ix(e,t,s={}){const n={withdraw_liquidity:s};return this.executeIxCw20(n,e,t)}}class xe extends B.xq{queryConfig(){return this.query({config:{}})}querySimulateSwapOperations(e){const t={simulate_swap_operations:e};return this.query(t)}buildReceiveIx(e,t){const s={receive:e};return this.executeIx(s,t)}buildExecuteSwapOperationsIx(e,t){const s={execute_swap_operations:e};return this.executeIx(s,t)}buildExecuteSwapOperationIx(e,t){const s={execute_swap_operation:e};return this.executeIx(s,t)}buildAssertMinimumReceiveIx(e,t){const s={assert_minimum_receive:e};return this.executeIx(s,t)}buildExecuteSwapOperationsCw20Ix(e,t,s){const n={execute_swap_operations:s};return this.executeIxCw20(n,e,t)}}function ye(e,t,s){return e.startsWith("cw20/")?t(e.substring(5)):s(e)}var Te,Ce,Ee,Me,Se,Le,We,Pe,qe,Ie=s(95194),_e=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},Be=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s};class De{get makerFeeBasisPoints(){return _e(this,Te,"f")}get poolFeeBasisPoints(){return _e(this,Ce,"f")}get sharesDenom(){return _e(this,Ee,"f")}get totalShares(){return _e(this,Me,"f")}get totalFeeBasisPoints(){return this.makerFeeBasisPoints+this.poolFeeBasisPoints}constructor(e,t,s,n){Te.set(this,void 0),Ce.set(this,void 0),Ee.set(this,void 0),Me.set(this,void 0),Se.set(this,void 0),this.contract=e,this.assets=n.assets.map((e=>ge(e.info))),this.totalDeposits=n.assets.map((e=>BigInt(e.amount))),this.name=this.assets.map((e=>(0,B.kh)(e).symbol)).join("-"),Be(this,Se,s.pair_type,"f"),Be(this,Ee,"cw20/"+s.liquidity_token,"f"),Be(this,Me,BigInt(n.total_share),"f");const i=t.pair_configs.find((e=>JSON.stringify(e.pair_type)==JSON.stringify(_e(this,Se,"f"))));if(void 0===i)throw new Error("Couln't find factoryPairConfig "+JSON.stringify(_e(this,Se,"f"))+" in "+JSON.stringify(t.pair_configs));Be(this,Te,i.maker_fee_bps,"f"),Be(this,Ce,i.total_fee_bps-i.maker_fee_bps,"f")}async checkVersion(){await this.contract.checkVersion({"astroport-pair":"^1.4","crownfi-astro-pair":"^0.9"})}async _refresh(e){const t=await this.contract.queryPool();if(2!=t.assets.length)throw new Error('The pool "pair" should contain 2 assets.');const s=t.assets;for(let e=0;e<s.length;e+=1){const[s,i]="token"in(n=t.assets[e]).info?[BigInt(n.amount),"cw20/"+n.info.token.contract_addr]:[BigInt(n.amount),n.info.native_token.denom];if(this.assets[e]!=i)throw new Error("The pair somehow changed the asset it was containing");this.totalDeposits[e]=s}var n;Be(this,Me,BigInt(t.total_share),"f");const i=e.pair_configs.find((e=>JSON.stringify(e.pair_type)==JSON.stringify(_e(this,Se,"f"))));if(void 0===i)throw new Error("Couln't find factoryPairConfig "+JSON.stringify(_e(this,Se,"f"))+" in "+JSON.stringify(e.pair_configs));Be(this,Te,i.maker_fee_bps,"f"),Be(this,Ce,i.total_fee_bps-i.maker_fee_bps,"f")}async refresh(){const e=new be(this.contract.endpoint,(await this.contract.queryConfig()).factory_addr);await this._refresh(await e.queryConfig())}exchangeRate(e){return e?Number(this.totalDeposits[0])/Number(this.totalDeposits[1]):Number(this.totalDeposits[1])/Number(this.totalDeposits[0])}exchangeValue(e,t,s){return s&&(e=e*(10000n-BigInt(this.totalFeeBasisPoints))/10000n),t?e*this.totalDeposits[0]/this.totalDeposits[1]:e*this.totalDeposits[1]/this.totalDeposits[0]}shareValue(e){return 0n==this.totalShares?[[0n,this.assets[0]],[0n,this.assets[1]]]:[[this.totalDeposits[0]*e/this.totalShares,this.assets[0]],[this.totalDeposits[1]*e/this.totalShares,this.assets[1]]]}buildProvideLiquidityIxs(e,t,s=.01,n){const i=[],a=[];return ye(this.assets[0],(t=>{a.push({contractAddress:t,msg:{increase_allowance:{amount:e+"",spender:this.contract.address}}})}),(t=>{i.push({amount:e+"",denom:t})})),ye(this.assets[1],(e=>{a.push({contractAddress:e,msg:{increase_allowance:{amount:t+"",spender:this.contract.address}}})}),(e=>{i.push({amount:t+"",denom:e})})),a.push(this.contract.buildProvideLiquidityIx({assets:[we(e,this.assets[0]),we(t,this.assets[1])],slippage_tolerance:s+"",receiver:n})),a}calculateProvideLiquidity(e,t){if(0n==this.totalDeposits[0]||0n==this.totalDeposits[1])return{newShares:1000n,newShareValue:[[e,this.assets[0]],[t,this.assets[1]]]};const s=(0,Ie.Ed)(e*this.totalShares/this.totalDeposits[0],t*this.totalShares/this.totalDeposits[1]),n=this.totalShares+s,i=this.totalDeposits[0]+e,a=this.totalDeposits[1]+t;return{newShares:s,newShareValue:[[i*s/n,this.assets[0]],[a*s/n,this.assets[1]]]}}buildWithdrawLiquidityIxs(e){return[this.contract.buildWithdrawLiquidityCw20Ix(this.sharesDenom,e)]}buildSwapIxs(e,t,s=.01,n){return ye(t,(t=>[this.contract.buildSwapCw20Ix(t,e,{max_spread:s+"",to:n})]),(t=>[this.contract.buildSwapIx({offer_asset:we(e,t),max_spread:s+"",to:n},[{amount:e+"",denom:t}])]))}async simulateSwap(e,t,s,n=.01,i){const a=this.buildSwapIxs(t,s,n,i);if(null==a)throw new Error("Market does not hold assets offered or requested");const r=await e.simulateContractMulti(a);return{instructions:a,amount:(0,B.H9)(e.account.address,r.result.events,!0)[s==this.assets[0]?this.assets[1]:this.assets[0]]||0n}}}Te=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,Me=new WeakMap,Se=new WeakMap;class Ae{constructor(e,t,s){Le.add(this),We.set(this,void 0),Pe.set(this,void 0),this.factoryContract=new be(e,t),this.routerContract=new xe(e,s),Be(this,We,{},"f"),Be(this,Pe,{},"f")}static async getFromChainId(e,t){if("atlantic-2"===(t=t||await e.getChainId()))return new Ae(e,"sei1nguta7v9s0tp0m07r46p7tsyg54rmuzjhcy0mkglxgekt2q3gdeqyhmyu7","sei1vnjfpnsm70puc2umdujw6fc3p0gv98p2vdymnt4ammqv46ht7vyss6rjhm");throw new Error("SwapMarket contract addresses aren't known for chain: "+t)}async checkVersion(){await this.factoryContract.checkVersion({"astroport-factory":"^1.6","crownfi-factory":"^0.9"})}async refresh(){const[e,{pairs:t}]=await Promise.all([this.factoryContract.queryConfig(),this.factoryContract.queryPairs(),(0,B.Yc)()]);for(const s of t){const t=s.asset_infos.map(ge).join("\0");if(null==_e(this,We,"f")[t]){const n=new ke(this.factoryContract.endpoint,s.contract_addr),i=await n.queryPool(),a=new De(n,e,s,i);_e(this,We,"f")[t]=a,_e(this,Pe,"f")[a.name]=a}else await _e(this,We,"f")[t]._refresh(e)}}getAllPairs(){return Object.values(_e(this,We,"f"))}getPair(e,t=!1){return _e(this,We,"f")[e.join("\0")]??(t?_e(this,We,"f")[e[1]+"\0"+e[0]]??null:null)}getPairFromName(e){return _e(this,Pe,"f")[e]??null}getDirectTradeMap(){const e=new Map;for(const t of this.getAllPairs())e.has(t.assets[0])?e.get(t.assets[0])?.push(t.assets[1]):e.set(t.assets[0],[t.assets[1]]),e.has(t.assets[1])?e.get(t.assets[1])?.push(t.assets[0]):e.set(t.assets[1],[t.assets[0]]);return e}hasAsset(...e){for(const t in _e(this,We,"f")){const[s,n]=t.split("\0");let i=e.indexOf(s);if(i>=0&&e.splice(i,1),i=e.indexOf(n),i>=0&&e.splice(i,1),0==e.length)return!0}return!1}resolveMultiSwapRoute(e,t){return e==t?[]:_e(this,Le,"m",qe).call(this,e,t)}buildSwapIxs(e,t,s,n=.01,i){const a=this.resolveMultiSwapRoute(t,s);if(null==a||0==a.length)return null;if(1==a.length)return this.getPair([t,s],!0).buildSwapIxs(e,t,n,i);const r=a.map((e=>({astro_swap:{offer_asset_info:ve(e[0]),ask_asset_info:ve(e[1])}})));return ye(t,(t=>[this.routerContract.buildExecuteSwapOperationsCw20Ix(t,e,{max_spread:n+"",operations:r})]),(t=>[this.routerContract.buildExecuteSwapOperationsIx({max_spread:n+"",operations:r},[{amount:e+"",denom:t}])]))}async simulateSwap(e,t,s,n,i=.01,a){const r=this.buildSwapIxs(t,s,n,i,a);if(s==n)throw new Error("Trading input denom must differ from trading output denom");if(null==r)throw new Error("Market does not hold assets offered or requested");const o=await e.simulateContractMulti(r);return{instructions:r,amount:(0,B.H9)(e.account.address,o.result.events,!0)[n]||0n}}exchangeRate(e,t,s){if(e==t)return 1;const n=this.resolveMultiSwapRoute(e,t);if(null==n||0==n.length)return NaN;let i=1;for(const t of n){const n=this.getPair(t,!0);let a=n.exchangeRate(n.assets[1]==e);s&&(a*=(1e4-n.totalFeeBasisPoints)/1e4),i*=a}return i}exchangeValue(e,t,s,n){if(t==s)return e;const i=this.resolveMultiSwapRoute(t,s);if(null==i||0==i.length)return null;for(const s of i){const i=this.getPair(s,!0);e=i.exchangeValue(e,i.assets[1]==t,n)}return e}}We=new WeakMap,Pe=new WeakMap,Le=new WeakSet,qe=function e(t,s,n=this.getDirectTradeMap(),i=new Set){if(i.has(t))return null;i.add(t);const a=n.get(t);if(null==a)return null;let r=null;for(let o=0;o<a.length;o+=1){const l=a[o];if(l==s)return[[t,s]];const c=_e(this,Le,"m",e).call(this,l,s,n,i);null!=c&&(null==r||r.length>c.length)&&(r=c)}return null==r?null:[[t,r[0][0]],...r]};class He extends ue{constructor(e){super(),e&&(this.text=e.text,this.icon=e.icon,this.value=e.value)}onIconChanged(e,t){this.refs.img.src=t||"/assets/placeholder.svg"}onTextChanged(e,t){this.refs.text.innerText=t+""}}He.registerElement();class Ne extends me{constructor(){super(),this.addEventListener("close",(e=>{this.remove()}));const e=[],t=[],s=ie.O9.discoveredWallets();for(const n of ie.oj){const i=ie.Gq[n],a=new He({text:i.name,icon:i.icon,value:n});s[n]?e.push(a):(a.text+="\n(Not found)",a.disabled=!0,t.push(a))}new URLSearchParams(document.location.search).get("dev")&&e.push(new He({text:"Enter mnemonic seed\nThis is dangerous! You probably shouldn't do this!",icon:"/assets/placeholder.svg",value:"seed-wallet"}));for(const t of e)t.addEventListener("click",(e=>{this._userWalletChoice=t.value,this.close()})),this.refs.choices.appendChild(t);for(const e of t)this.refs.choices.appendChild(e);this.refs.cancelButton.addEventListener("click",(e=>{this.close()})),this._userWalletChoice=null,this.userWalletChoiceCallback=()=>{},this.userWalletChoice=new Promise((e=>{this.userWalletChoiceCallback=e})),this.refs.selectedNetwork.value=(0,B.Gy)().chainId}connectedCallback(){this.showModal()}disconnectedCallback(){this.userWalletChoiceCallback(this._userWalletChoice)}}async function ze(){const e=new Ne;document.body.appendChild(e);const t=await e.userWalletChoice,s="read-only-address"==t?{address:prompt("Enter sei address")+""}:"seed-wallet"==t?{seed:prompt("Enter mnemonic seed")+"",index:Number(prompt("Enter mnemonic seed index","0"))||0}:t;try{J(!0,"Connecting to wallet...");const t=(0,B.Mo)(e.refs.selectedNetwork.value);if(null==t)throw new Error("No endpoint known for "+e.refs.selectedNetwork.value);const n=await B.k2.get(s,t);await Ae.getFromChainId(n.wasmClient,t.chainId),(0,B.qv)(t.chainId),await B.k2.setDefaultProvider(s)}finally{J(!1)}}Ne.registerElement(),class extends ce{constructor(){super(),this.innerText="Connect wallet",this.addEventListener("click",(e=>{this.walletAddress?A((async()=>{B.k2.nullifyDefaultProvider()})):A(ze)}))}onWalletAddressChanged(e,t){this.innerText=t?t.substring(0,4)+"…"+t.substring(t.length-4)+" ("+(0,B.Gy)().chainId+")":"Connect wallet ("+(0,B.Gy)().chainId+")"}}.registerElement(),B.Zm.on("defaultProviderChanged",(e=>{V('button[is="wallet-button"]').forEach((t=>{t.walletAddress=e.account?.address??null}))}));var Oe,Re,Fe,je,Ve,Je,Ze,Ue,Ge,Ye,Qe,Ke=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},$e=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class Xe{constructor(e){Oe.set(this,void 0),Re.set(this,void 0),Fe.set(this,void 0),je.set(this,void 0),Ve.set(this,void 0),Je.set(this,void 0),Ze.set(this,void 0),Ue.set(this,void 0),Ge.set(this,void 0),Ye.set(this,void 0),Qe.set(this,void 0),Ke(this,Oe,e,"f")}get form(){return void 0===$e(this,Re,"f")&&(Ke(this,Re,$e(this,Oe,"f").querySelector('[cewt-ref="form"]:not(:scope [is] *)'),"f"),$e(this,Re,"f").values=st.bind($e(this,Re,"f"),$e(this,Re,"f"))),$e(this,Re,"f")}get inBalance(){return void 0===$e(this,Fe,"f")&&Ke(this,Fe,$e(this,Oe,"f").querySelector('[cewt-ref="in-balance"]:not(:scope [is] *)'),"f"),$e(this,Fe,"f")}get inIcon(){return void 0===$e(this,je,"f")&&Ke(this,je,$e(this,Oe,"f").querySelector('[cewt-ref="in-icon"]:not(:scope [is] *)'),"f"),$e(this,je,"f")}get btnInMax(){return void 0===$e(this,Ve,"f")&&Ke(this,Ve,$e(this,Oe,"f").querySelector('[cewt-ref="btn-in-max"]:not(:scope [is] *)'),"f"),$e(this,Ve,"f")}get btnInHalf(){return void 0===$e(this,Je,"f")&&Ke(this,Je,$e(this,Oe,"f").querySelector('[cewt-ref="btn-in-half"]:not(:scope [is] *)'),"f"),$e(this,Je,"f")}get inError(){return void 0===$e(this,Ze,"f")&&Ke(this,Ze,$e(this,Oe,"f").querySelector('[cewt-ref="in-error"]:not(:scope [is] *)'),"f"),$e(this,Ze,"f")}get outBalance(){return void 0===$e(this,Ue,"f")&&Ke(this,Ue,$e(this,Oe,"f").querySelector('[cewt-ref="out-balance"]:not(:scope [is] *)'),"f"),$e(this,Ue,"f")}get outIcon(){return void 0===$e(this,Ge,"f")&&Ke(this,Ge,$e(this,Oe,"f").querySelector('[cewt-ref="out-icon"]:not(:scope [is] *)'),"f"),$e(this,Ge,"f")}get outError(){return void 0===$e(this,Ye,"f")&&Ke(this,Ye,$e(this,Oe,"f").querySelector('[cewt-ref="out-error"]:not(:scope [is] *)'),"f"),$e(this,Ye,"f")}get btnSwap(){return void 0===$e(this,Qe,"f")&&Ke(this,Qe,$e(this,Oe,"f").querySelector('[cewt-ref="btn-swap"]:not(:scope [is] *)'),"f"),$e(this,Qe,"f")}}Oe=new WeakMap,Re=new WeakMap,Fe=new WeakMap,je=new WeakMap,Ve=new WeakMap,Je=new WeakMap,Ze=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,Ye=new WeakMap,Qe=new WeakMap;let et=null;class tt extends HTMLDivElement{constructor(){super(),0==this.childElementCount&&this.appendChild((null==et&&(et=document.createElement("template"),et.innerHTML='\n\t<p>\n\t\tHail, noble traders and crypto enthusiasts! We bid thee welcome to the grand realm of Crownfi Swaps, where the\n\t\tart of swapping digital treasures is elevated to a level befitting kings and queens.\n\t</p>\n\t<form cewt-ref="form" class="swap-inner">\n\t\t<div class="swap-coin">\n\t\t\t<div class="left-right-text">\n\t\t\t\t<span>From</span>\n\t\t\t\t<span>Balance: <span cewt-ref="in-balance">[Unknown]</span></span>\n\t\t\t</div>\n\t\t\t<div class="swap-coin-inputs">\n\t\t\t\t<img cewt-ref="in-icon" class="swap-coin-icon" src="/assets/placeholder.svg">\n\t\t\t\t\x3c!-- Defined at runtime --\x3e\n\t\t\t\t<select is="select-changes" name="in-token"></select>\n\t\t\t\t<button cewt-ref="btn-in-max">Max</button>\n\t\t\t\t<button cewt-ref="btn-in-half">Half</button>\n\t\t\t\t<input type="number" name="in-amount">\n\t\t\t</div>\n\t\t\t<div class="input-error" cewt-ref="in-error"></div>\n\t\t</div>\n\t\t<img src="/assets/swaps-swords.svg">\n\t\t<div class="swap-coin">\n\t\t\t<div class="left-right-text">\n\t\t\t\t<span>To</span>\n\t\t\t\t<span>Balance: <span cewt-ref="out-balance">[Unknown]</span></span>\n\t\t\t</div>\n\t\t\t<div class="swap-coin-inputs">\n\t\t\t\t<img src="/assets/placeholder.svg" cewt-ref="out-icon" class="swap-coin-icon">\n\t\t\t\t\x3c!-- Defined at runtime --\x3e\n\t\t\t\t<select is="select-changes" name="out-token"></select>\n\t\t\t\t<input name="out-amount" readonly="" type="number">\n\t\t\t</div>\n\t\t\t<div class="input-error" cewt-ref="out-error"></div>\n\t\t</div>\n\t\t<button class="primary" disabled="" ,="" cewt-ref="btn-swap">Swap</button>\n\t</form>\n\t<img class="seal" src="/assets/seal.svg">\n'),et).content.cloneNode(!0)),this.setAttribute("is","swap-component"),this.refs=new Xe(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("swap-component",this,{extends:"div"})}}function st(e){const t={},[s,n]=e instanceof HTMLFormElement?[e,null]:[e.target,e.submitter];for(let e=0;e<s.elements.length;e+=1){const i=s.elements[e];if(i instanceof HTMLButtonElement)i==n&&i.name&&(t[i.name]=i.value);else if(i instanceof HTMLInputElement)switch(i.type){case"checkbox":t[i.name]=i.checked;break;case"datetime-local":t[i.name]=i.valueAsDate;break;case"file":t[i.name]=i.files;break;case"number":case"range":t[i.name]=i.valueAsNumber;break;case"radio":if(i.checked){t[i.name]=i.value;break}break;default:t[i.name]=i.value}else(i instanceof HTMLOutputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement)&&(t[i.name]=i.value)}return t}var nt,it,at,rt,ot,lt=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},ct=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s};class ht extends HTMLSelectElement{get oldValue(){return lt(this,nt,"f")}constructor(){super(),nt.set(this,void 0),it.set(this,void 0),this.setAttribute("is","select-changes"),ct(this,nt,this.value,"f"),ct(this,it,this.value,"f");const e=e=>{lt(this,it,"f")!=this.value&&(ct(this,nt,lt(this,it,"f"),"f"),ct(this,it,this.value,"f"))};this.addEventListener("change",e,{capture:!0}),this.addEventListener("input",e,{capture:!0})}}nt=new WeakMap,it=new WeakMap,customElements.define("select-changes",ht,{extends:"select"});class dt extends tt{constructor(){super(),at.set(this,null),rt.set(this,!1),ot.set(this,!1);const e=this.refs.form.elements["in-token"],t=this.refs.form.elements["out-token"];e.addEventListener("change",(s=>{this.refs.inIcon.src="/assets/lazy-load.svg",setTimeout((()=>{this.refs.inIcon.src=(0,B.kh)(e.value).icon}),1);const{decimals:n}=(0,B.kh)(e.value);this.refs.form.elements["in-amount"].step=(10**-n).toString(),this.refs.form.elements["in-amount"].step=(10**-n).toString(),t.value==e.value&&(t.value=e.oldValue,t.dispatchEvent(new Event("change"))),this.refreshBalances(),this.refreshTradeOutput()})),t.addEventListener("change",(s=>{this.refs.outIcon.src="/assets/lazy-load.svg",setTimeout((()=>{this.refs.outIcon.src=(0,B.kh)(t.value).icon}),1);const{decimals:n}=(0,B.kh)(t.value);this.refs.form.elements["out-amount"].step=(10**-n).toString(),this.refs.form.elements["out-amount"].step=(10**-n).toString(),e.value==t.value&&(e.value=t.oldValue,e.dispatchEvent(new Event("change"))),this.refreshBalances(),this.refreshTradeOutput()})),this.refs.form.elements["in-amount"].addEventListener("input",(e=>{this.refreshTradeOutput()})),this.refs.form.addEventListener("submit",(e=>{e.preventDefault();const t=this.refs.form.elements["in-token"].value,s=this.refs.form.elements["out-token"].value;if(t==s)return void async function(e,t){const s=new _({heading:"Nothing to do",message:'The "from" and "to" coins are the same.'});document.body.appendChild(s),await s.untilClosed}();const n=(0,B.Jd)(this.refs.form.elements["in-amount"].value,(0,B.kh)(t).decimals)||0n;A((async()=>{try{J(!0,"Waiting for transaction confirmation...");const e=await this.swapMarket(),i=await B.k2.get();await i.executeContractMulti(e.buildSwapIxs(n,t,s,.5))}finally{J(!1)}}))})),this.rebuildSwapOptions()}invalidateSwapMarket(){ct(this,at,null,"f")}async swapMarket(){if(null==lt(this,at,"f")){const e=await B.k2.get(),t=await Ae.getFromChainId(e.wasmClient,e.chainId);await t.refresh(),ct(this,at,t,"f")}return lt(this,at,"f")}rebuildSwapOptions(){!function(e,t=[]){const s=new Set(t);for(let t=0;t<e.elements.length;t++){const n=e.elements[t];!s.has(n)&&"disabled"in n&&(n.disabled=!0)}}(this.refs.form),this.refs.form.classList.add("lazy-loading"),A((async()=>{try{this.refs.inError.innerText="Loading swap market...",this.refs.form.elements["in-token"].innerHTML="",this.refs.form.elements["out-token"].innerHTML="";const e=(await this.swapMarket()).getAllPairs(),t=new Set;for(const s of e)t.add(s.assets[0]),t.add(s.assets[1]);for(const e of t){const t=document.createElement("option");t.innerText=(0,B.kh)(e).symbol,t.value=e,this.refs.form.elements["in-token"].appendChild(t.cloneNode(!0)),this.refs.form.elements["out-token"].appendChild(t)}this.refs.form.elements["in-token"].value=e[0].assets[0],this.refs.form.elements["in-token"].dispatchEvent(new Event("change")),this.refs.form.elements["out-token"].value=e[0].assets[1],this.refs.form.elements["out-token"].dispatchEvent(new Event("change")),this.refs.inError.innerText="",function(e,t=[]){const s=new Set(t);for(let t=0;t<e.elements.length;t++){const n=e.elements[t];!s.has(n)&&"disabled"in n&&(n.disabled=!1)}}(this.refs.form,[this.refs.btnInHalf,this.refs.btnInMax]),this.refreshBalances()}catch(e){throw this.refs.inError.innerText="Unable to load swap market",e}finally{this.refs.form.classList.remove("lazy-loading")}}))}refreshBalances(){A((async()=>{this.refs.inBalance.innerText="",this.refs.inBalance.classList.add("lazy-loading-text-2"),this.refs.outBalance.innerText="",this.refs.outBalance.classList.add("lazy-loading-text-2");try{const e=this.refs.form.elements["in-token"].value,t=this.refs.form.elements["out-token"].value;if(!e||!t)return this.refs.inBalance.innerText="[Invalid]",void(this.refs.outBalance.innerText="[Invalid]");const s=await B.k2.get();if(null==s.account)return this.refs.inBalance.innerText="[Not connected]",void(this.refs.outBalance.innerText="[Not connected]");this.refs.inBalance.innerText=(0,B.wt)(await s.getBalance(e),e),this.refs.inBalance.classList.remove("lazy-loading-text-2"),this.refs.outBalance.innerText=(0,B.wt)(await s.getBalance(t),t),this.refs.outBalance.classList.remove("lazy-loading-text-2")}catch(e){throw this.refs.inBalance.innerText||(this.refs.inBalance.innerText="[Error]"),this.refs.outBalance.innerText||(this.refs.outBalance.innerText="[Error]"),e}finally{this.refs.inBalance.classList.remove("lazy-loading-text-2"),this.refs.outBalance.classList.remove("lazy-loading-text-2")}}))}refreshTradeOutput(){if(ct(this,rt,!0,"f"),!lt(this,ot,"f")){ct(this,ot,!0,"f");const e=this.refs.form.elements["in-amount"],t=this.refs.form.elements["out-amount"],s=this.refs.btnSwap;s.disabled=!0,this.refs.inError.innerText="",this.refs.inError.classList.add("lazy-loading-text"),this.refs.outError.innerText="",(async()=>{const n=B.k2.get();do{s.disabled=!0,ct(this,rt,!1,"f"),t.value="",this.refs.inError.innerText="",this.refs.inError.classList.add("lazy-loading-text");const[i]=await Promise.all([n,new Promise((e=>setTimeout(e,500)))]),a=this.refs.form.elements["in-token"].value,r=this.refs.form.elements["out-token"].value,o=(0,B.Jd)(e.value,(0,B.kh)(a).decimals)||0n;if(o<=0n){this.refs.inError.innerText="Input must be a valid number greater than 0",this.refs.inError.classList.remove("lazy-loading-text");continue}if(null==i.account){this.refs.inError.innerText="Wallet must be connected to simulate trades",this.refs.inError.classList.remove("lazy-loading-text");continue}const l=await this.swapMarket(),c=await l.simulateSwap(i,o,a,r,.5),h=l.exchangeValue(o,a,r,!0)??0n,d=1-Number(c.amount)/Number(h);t.value=(0,B.Zy)(c.amount,(0,B.kh)(r).decimals,!0),this.refs.outError.innerText=d>.005?"Warning: approx. "+(100*d).toFixed(2)+"% slippage":"",s.disabled=!1}while(lt(this,rt,"f"))})().catch((e=>{if((0,B.Mm)(e)){const t=(0,B.Z5)(e);this.refs.inError.innerText=t?t.errorSource+": "+t.errorDetail:"Transaction Error: "+e.message}else this.refs.inError.innerText=e.name+": "+e.message;console.error("refreshTradeOutput:",e)})).finally((()=>{ct(this,ot,!1,"f"),this.refs.inError.classList.remove("lazy-loading-text")}))}}}at=new WeakMap,rt=new WeakMap,ot=new WeakMap,dt.registerElement(),B.Zm.on("defaultNetworkChanged",(e=>{V('div[is="swap-component"]').forEach((e=>{e.invalidateSwapMarket(),e.refreshTradeOutput()}))})),B.Zm.on("defaultProviderChanged",(e=>{V('div[is="swap-component"]').forEach((e=>{e.refreshBalances(),e.refreshTradeOutput()}))})),B.Zm.on("transactionConfirmed",(e=>{V('div[is="swap-component"]').forEach((e=>{e.refreshBalances(),e.refreshTradeOutput()}))}));var ut,ft,pt,mt,wt,gt,vt,bt,kt,xt,yt,Tt,Ct,Et,Mt,St,Lt,Wt,Pt,qt,It,_t,Bt,Dt,At,Ht,Nt,zt,Ot,Rt,Ft,jt,Vt,Jt,Zt,Ut,Gt,Yt,Qt,Kt,$t,Xt,es,ts,ss,ns=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},is=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class as{constructor(e){ut.set(this,void 0),ft.set(this,void 0),pt.set(this,void 0),mt.set(this,void 0),wt.set(this,void 0),gt.set(this,void 0),vt.set(this,void 0),bt.set(this,void 0),ns(this,ut,e,"f")}get bigChestTvl(){return void 0===is(this,ft,"f")&&ns(this,ft,is(this,ut,"f").querySelector('[cewt-ref="big-chest-tvl"]:not(:scope [is] *)'),"f"),is(this,ft,"f")}get bigChestTotalTraded(){return void 0===is(this,pt,"f")&&ns(this,pt,is(this,ut,"f").querySelector('[cewt-ref="big-chest-total-traded"]:not(:scope [is] *)'),"f"),is(this,pt,"f")}get bigChestVolume24H(){return void 0===is(this,mt,"f")&&ns(this,mt,is(this,ut,"f").querySelector('[cewt-ref="big-chest-volume-24h"]:not(:scope [is] *)'),"f"),is(this,mt,"f")}get allPoolBtn(){return void 0===is(this,wt,"f")&&ns(this,wt,is(this,ut,"f").querySelector('[cewt-ref="all-pool-btn"]:not(:scope [is] *)'),"f"),is(this,wt,"f")}get myPoolBtn(){return void 0===is(this,gt,"f")&&ns(this,gt,is(this,ut,"f").querySelector('[cewt-ref="my-pool-btn"]:not(:scope [is] *)'),"f"),is(this,gt,"f")}get poolSearchText(){return void 0===is(this,vt,"f")&&ns(this,vt,is(this,ut,"f").querySelector('[cewt-ref="pool-search-text"]:not(:scope [is] *)'),"f"),is(this,vt,"f")}get poolList(){return void 0===is(this,bt,"f")&&ns(this,bt,is(this,ut,"f").querySelector('[cewt-ref="pool-list"]:not(:scope [is] *)'),"f"),is(this,bt,"f")}}ut=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,wt=new WeakMap,gt=new WeakMap,vt=new WeakMap,bt=new WeakMap;let rs=null;class os extends HTMLDivElement{constructor(){super(),0==this.childElementCount&&this.appendChild((null==rs&&(rs=document.createElement("template"),rs.innerHTML='\n\t<div class="big-chests">\n\t\t\x3c!-- Padding bottom 50% ? --\x3e\n\t\t<div>\n\t\t\tCrownFi TVL:<br>\n\t\t\t<span cewt-ref="big-chest-tvl">⣿⣿⣿⣿</span>\n\t\t</div>\n\t\t<div>\n\t\t\tTotal Volume Traded:<br>\n\t\t\t<span cewt-ref="big-chest-total-traded">// TODO</span>\n\t\t</div>\n\t\t<div>\n\t\t\t24H Volume:<br>\n\t\t\t<span cewt-ref="big-chest-volume-24h">// TODO</span>\n\t\t</div>\n\t</div>\n\t<div class="pool-search-options">\n\t\t<button cewt-ref="all-pool-btn" disabled="" class="primary">All Pools</button>\n\t\t<button cewt-ref="my-pool-btn" disabled="" class="primary">My Pools</button>\n\t\t<input class="primary" cewt-ref="pool-search-text" type="search" disabled="">\n\t</div>\n\t<div cewt-ref="pool-list" class="pool-list">\n\t\t<div class="pool-list-headings">\n\t\t\t<div class="pool-list-heading">\n\t\t\t\t\x3c!-- Quick hack to appease the grid gods --\x3e\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\t\x3c!-- Quick hack to appease the grid gods --\x3e\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\tPools\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\tExchange Rate\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\tTotal Deposits\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\tFee Rate\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\t24H Volume\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\tAPY\n\t\t\t</div>\n\t\t\t<div class="pool-list-heading">\n\t\t\t\t\x3c!-- Quick hack to appease the grid gods --\x3e\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'),rs).content.cloneNode(!0)),this.setAttribute("is","farm-pool-component"),this.refs=new as(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("farm-pool-component",this,{extends:"div"})}}class ls{constructor(e){kt.set(this,void 0),xt.set(this,void 0),yt.set(this,void 0),Tt.set(this,void 0),Ct.set(this,void 0),Et.set(this,void 0),Mt.set(this,void 0),St.set(this,void 0),Lt.set(this,void 0),Wt.set(this,void 0),Pt.set(this,void 0),ns(this,kt,e,"f")}get btnStar(){return void 0===is(this,xt,"f")&&ns(this,xt,is(this,kt,"f").querySelector('[cewt-ref="btn-star"]:not(:scope [is] *)'),"f"),is(this,xt,"f")}get iconToken0(){return void 0===is(this,yt,"f")&&ns(this,yt,is(this,kt,"f").querySelector('[cewt-ref="icon-token0"]:not(:scope [is] *)'),"f"),is(this,yt,"f")}get iconToken1(){return void 0===is(this,Tt,"f")&&ns(this,Tt,is(this,kt,"f").querySelector('[cewt-ref="icon-token1"]:not(:scope [is] *)'),"f"),is(this,Tt,"f")}get poolName(){return void 0===is(this,Ct,"f")&&ns(this,Ct,is(this,kt,"f").querySelector('[cewt-ref="pool-name"]:not(:scope [is] *)'),"f"),is(this,Ct,"f")}get exchangeRate(){return void 0===is(this,Et,"f")&&ns(this,Et,is(this,kt,"f").querySelector('[cewt-ref="exchange-rate"]:not(:scope [is] *)'),"f"),is(this,Et,"f")}get totalDeposits(){return void 0===is(this,Mt,"f")&&ns(this,Mt,is(this,kt,"f").querySelector('[cewt-ref="total-deposits"]:not(:scope [is] *)'),"f"),is(this,Mt,"f")}get feeRate(){return void 0===is(this,St,"f")&&ns(this,St,is(this,kt,"f").querySelector('[cewt-ref="fee-rate"]:not(:scope [is] *)'),"f"),is(this,St,"f")}get volume24H(){return void 0===is(this,Lt,"f")&&ns(this,Lt,is(this,kt,"f").querySelector('[cewt-ref="volume-24h"]:not(:scope [is] *)'),"f"),is(this,Lt,"f")}get apy(){return void 0===is(this,Wt,"f")&&ns(this,Wt,is(this,kt,"f").querySelector('[cewt-ref="apy"]:not(:scope [is] *)'),"f"),is(this,Wt,"f")}get btnExpand(){return void 0===is(this,Pt,"f")&&ns(this,Pt,is(this,kt,"f").querySelector('[cewt-ref="btn-expand"]:not(:scope [is] *)'),"f"),is(this,Pt,"f")}}kt=new WeakMap,xt=new WeakMap,yt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,Et=new WeakMap,Mt=new WeakMap,St=new WeakMap,Lt=new WeakMap,Wt=new WeakMap,Pt=new WeakMap;let cs=null;class hs extends HTMLDivElement{static get observedAttributes(){return["pool"]}get pool(){return is(this,qt,"f")}set pool(e){null==e?this.removeAttribute("pool"):this.setAttribute("pool",e)}onPoolChanged(e,t){}attributeChangedCallback(e,t,s){"pool"===e&&(ns(this,qt,s,"f"),this.onPoolChanged(t,s))}constructor(){super(),qt.set(this,null),0==this.childElementCount&&this.appendChild((null==cs&&(cs=document.createElement("template"),cs.innerHTML='\n\t<button cewt-ref="btn-star" disabled="" class="pool-star"></button>\n\t<div class="pool-stats-icons">\n\t\t<img src="/assets/lazy-load.svg" cewt-ref="icon-token0">\n\t\t<img cewt-ref="icon-token1" src="/assets/lazy-load.svg">\n\t</div>\n\t<div cewt-ref="pool-name" class="pool-stats-name">\n\t\t⣿⣿\n\t</div>\n\t<div class="pool-stat" cewt-ref="exchange-rate">\n\t\t⣿⣿\n\t</div>\n\t<div class="pool-stat" cewt-ref="total-deposits">\n\t\t⣿⣿⣿⣿<br>\n\t\t⣿⣿⣿⣿\n\t</div>\n\t<div class="pool-stat" cewt-ref="fee-rate">\n\t\t⣿⣿\n\t</div>\n\t<div cewt-ref="volume-24h" class="pool-stat">\n\t\t⣿⣿⣿⣿\n\t</div>\n\t<div cewt-ref="apy" class="pool-stat">\n\t\t⣿⣿\n\t</div>\n\t\n\t<button disabled="" class="pool-expand" cewt-ref="btn-expand"></button>\n'),cs).content.cloneNode(!0)),this.setAttribute("is","farm-pool-item"),this.refs=new ls(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("farm-pool-item",this,{extends:"div"})}}qt=new WeakMap;class ds{constructor(e){It.set(this,void 0),_t.set(this,void 0),Bt.set(this,void 0),Dt.set(this,void 0),At.set(this,void 0),ns(this,It,e,"f")}get depositTxt(){return void 0===is(this,_t,"f")&&ns(this,_t,is(this,It,"f").querySelector('[cewt-ref="deposit-txt"]:not(:scope [is] *)'),"f"),is(this,_t,"f")}get depositBtn(){return void 0===is(this,Bt,"f")&&ns(this,Bt,is(this,It,"f").querySelector('[cewt-ref="deposit-btn"]:not(:scope [is] *)'),"f"),is(this,Bt,"f")}get withdrawTxt(){return void 0===is(this,Dt,"f")&&ns(this,Dt,is(this,It,"f").querySelector('[cewt-ref="withdraw-txt"]:not(:scope [is] *)'),"f"),is(this,Dt,"f")}get withdrawBtn(){return void 0===is(this,At,"f")&&ns(this,At,is(this,It,"f").querySelector('[cewt-ref="withdraw-btn"]:not(:scope [is] *)'),"f"),is(this,At,"f")}}It=new WeakMap,_t=new WeakMap,Bt=new WeakMap,Dt=new WeakMap,At=new WeakMap;let us=null;class fs extends HTMLDivElement{static get observedAttributes(){return["pool"]}get pool(){return is(this,Ht,"f")}set pool(e){null==e?this.removeAttribute("pool"):this.setAttribute("pool",e)}onPoolChanged(e,t){}attributeChangedCallback(e,t,s){"pool"===e&&(ns(this,Ht,s,"f"),this.onPoolChanged(t,s))}constructor(){super(),Ht.set(this,null),0==this.childElementCount&&this.appendChild((null==us&&(us=document.createElement("template"),us.innerHTML='\n\t<div class="farm-interact-option">\n\t\t<div>\n\t\t\t<span class="interact-option-title">Pool shares</span>\n\t\t\t<span class="interact-option-text" cewt-ref="deposit-txt">-</span>\n\t\t</div>\n\t\t<button cewt-ref="deposit-btn">Deposit</button>\n\t</div>\n\t<div class="farm-interact-option">\n\t\t<div>\n\t\t\t<span class="interact-option-title">Share value</span>\n\t\t\t<span cewt-ref="withdraw-txt" class="interact-option-text">-</span>\n\t\t</div>\n\t\t<button cewt-ref="withdraw-btn">Withdraw</button>\n\t</div>\n\t\x3c!--\n\t<div class="farm-interact-option">\n\t\t<div>\n\t\t\t<span class="interact-option-title">Rewards</span>\n\t\t\t<span cewt-ref="claim-txt" class="interact-option-text">-</span>\n\t\t</div>\n\t\t<button cewt-ref="claim-btn">Claim</button>\n\t</div>\n\t--\x3e\n'),us).content.cloneNode(!0)),this.setAttribute("is","farm-pool-item-options"),this.refs=new ds(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("farm-pool-item-options",this,{extends:"div"})}}Ht=new WeakMap;class ps{constructor(e){Nt.set(this,void 0),zt.set(this,void 0),Ot.set(this,void 0),Rt.set(this,void 0),Ft.set(this,void 0),jt.set(this,void 0),Vt.set(this,void 0),Jt.set(this,void 0),Zt.set(this,void 0),Ut.set(this,void 0),Gt.set(this,void 0),Yt.set(this,void 0),ns(this,Nt,e,"f")}get form(){return void 0===is(this,zt,"f")&&(ns(this,zt,is(this,Nt,"f").querySelector('[cewt-ref="form"]:not(:scope [is] *)'),"f"),is(this,zt,"f").values=ks.bind(is(this,zt,"f"),is(this,zt,"f"))),is(this,zt,"f")}get denomToken0(){return void 0===is(this,Ot,"f")&&ns(this,Ot,is(this,Nt,"f").querySelector('[cewt-ref="denom-token0"]:not(:scope [is] *)'),"f"),is(this,Ot,"f")}get balanceToken0(){return void 0===is(this,Rt,"f")&&ns(this,Rt,is(this,Nt,"f").querySelector('[cewt-ref="balance-token0"]:not(:scope [is] *)'),"f"),is(this,Rt,"f")}get denomToken1(){return void 0===is(this,Ft,"f")&&ns(this,Ft,is(this,Nt,"f").querySelector('[cewt-ref="denom-token1"]:not(:scope [is] *)'),"f"),is(this,Ft,"f")}get balanceToken1(){return void 0===is(this,jt,"f")&&ns(this,jt,is(this,Nt,"f").querySelector('[cewt-ref="balance-token1"]:not(:scope [is] *)'),"f"),is(this,jt,"f")}get tradeWarning(){return void 0===is(this,Vt,"f")&&ns(this,Vt,is(this,Nt,"f").querySelector('[cewt-ref="trade-warning"]:not(:scope [is] *)'),"f"),is(this,Vt,"f")}get implicitTradeFrom(){return void 0===is(this,Jt,"f")&&ns(this,Jt,is(this,Nt,"f").querySelector('[cewt-ref="implicit-trade-from"]:not(:scope [is] *)'),"f"),is(this,Jt,"f")}get implicitTradeTo(){return void 0===is(this,Zt,"f")&&ns(this,Zt,is(this,Nt,"f").querySelector('[cewt-ref="implicit-trade-to"]:not(:scope [is] *)'),"f"),is(this,Zt,"f")}get denomResult(){return void 0===is(this,Ut,"f")&&ns(this,Ut,is(this,Nt,"f").querySelector('[cewt-ref="denom-result"]:not(:scope [is] *)'),"f"),is(this,Ut,"f")}get balanceResult(){return void 0===is(this,Gt,"f")&&ns(this,Gt,is(this,Nt,"f").querySelector('[cewt-ref="balance-result"]:not(:scope [is] *)'),"f"),is(this,Gt,"f")}get btnCancel(){return void 0===is(this,Yt,"f")&&ns(this,Yt,is(this,Nt,"f").querySelector('[cewt-ref="btn-cancel"]:not(:scope [is] *)'),"f"),is(this,Yt,"f")}}Nt=new WeakMap,zt=new WeakMap,Ot=new WeakMap,Rt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,Vt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Ut=new WeakMap,Gt=new WeakMap,Yt=new WeakMap;let ms=null;class ws extends HTMLDialogElement{constructor(){super(),0==this.childElementCount&&this.appendChild((null==ms&&(ms=document.createElement("template"),ms.innerHTML='\n\t<h1>Deposit</h1>\n\t<form method="dialog" cewt-ref="form" class="dialog-trade-form">\n\t\t<h2>Deposit type:</h2>\n\t\t<div class="trade-type-options">\n\t\t\t<label class="toggle-button"><input checked="" type="radio" name="deposit-type" value="current"><span>Current rate</span></label>\n\t\t\t<label class="toggle-button"><input disabled="" value="imbalanced" name="deposit-type" type="radio"><span>Custom amounts</span></label>\n\t\t</div>\n\n\t\t<h2>Spending:</h2>\n\t\t<label class="trade-amount-input">\n\t\t\t<input name="amount0" min="1" type="number">\n\t\t\t<span cewt-ref="denom-token0" class="trade-amount-denom">Token0</span>\n\t\t</label>\n\t\t<div class="trade-amount-balance">\n\t\t\tCurrent balance: <span cewt-ref="balance-token0"></span>\n\t\t</div>\n\t\t<label class="trade-amount-input">\n\t\t\t<input min="1" name="amount1" type="number">\n\t\t\t<span cewt-ref="denom-token1" class="trade-amount-denom">Token1</span>\n\t\t</label>\n\t\t<div class="trade-amount-balance">\n\t\t\tCurrent balance: <span cewt-ref="balance-token1"></span>\n\t\t</div>\n\n\t\t<div cewt-ref="trade-warning" class="trade-warning">\n\t\t\tNote: <span cewt-ref="implicit-trade-from">-</span> will be swapped to <span cewt-ref="implicit-trade-to">-</span> during deposit.\n\t\t</div>\n\n\t\t<h2>Recieving</h2>\n\t\t<label class="trade-amount-input">\n\t\t\t<input name="result" type="number" min="1">\n\t\t\t<span cewt-ref="denom-result" class="trade-amount-denom">Shares</span>\n\t\t</label>\n\t\t<div class="trade-amount-balance">\n\t\t\tCurrent balance: <span cewt-ref="balance-result"></span>\n\t\t</div>\n\n\n\t\t\n\n\t\t<input name="pool" type="hidden">\n\t\t<button class="primary trade-execute">Deposit</button>\n\t\t<button cewt-ref="btn-cancel">Cancel</button>\n\t</form>\n'),ms).content.cloneNode(!0)),this.setAttribute("is","farm-pool-deposit-dialog"),this.refs=new ps(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("farm-pool-deposit-dialog",this,{extends:"dialog"})}}class gs{constructor(e){Qt.set(this,void 0),Kt.set(this,void 0),$t.set(this,void 0),Xt.set(this,void 0),es.set(this,void 0),ts.set(this,void 0),ss.set(this,void 0),ns(this,Qt,e,"f")}get form(){return void 0===is(this,Kt,"f")&&(ns(this,Kt,is(this,Qt,"f").querySelector('[cewt-ref="form"]:not(:scope [is] *)'),"f"),is(this,Kt,"f").values=ks.bind(is(this,Kt,"f"),is(this,Kt,"f"))),is(this,Kt,"f")}get denom(){return void 0===is(this,$t,"f")&&ns(this,$t,is(this,Qt,"f").querySelector('[cewt-ref="denom"]:not(:scope [is] *)'),"f"),is(this,$t,"f")}get balance(){return void 0===is(this,Xt,"f")&&ns(this,Xt,is(this,Qt,"f").querySelector('[cewt-ref="balance"]:not(:scope [is] *)'),"f"),is(this,Xt,"f")}get tradeResultToken0(){return void 0===is(this,es,"f")&&ns(this,es,is(this,Qt,"f").querySelector('[cewt-ref="trade-result-token0"]:not(:scope [is] *)'),"f"),is(this,es,"f")}get tradeResultToken1(){return void 0===is(this,ts,"f")&&ns(this,ts,is(this,Qt,"f").querySelector('[cewt-ref="trade-result-token1"]:not(:scope [is] *)'),"f"),is(this,ts,"f")}get btnCancel(){return void 0===is(this,ss,"f")&&ns(this,ss,is(this,Qt,"f").querySelector('[cewt-ref="btn-cancel"]:not(:scope [is] *)'),"f"),is(this,ss,"f")}}Qt=new WeakMap,Kt=new WeakMap,$t=new WeakMap,Xt=new WeakMap,es=new WeakMap,ts=new WeakMap,ss=new WeakMap;let vs=null;class bs extends HTMLDialogElement{constructor(){super(),0==this.childElementCount&&this.appendChild((null==vs&&(vs=document.createElement("template"),vs.innerHTML='\n\t<h1>Withdraw</h1>\n\t<form method="dialog" cewt-ref="form" class="dialog-trade-form">\n\t\t<label class="trade-amount-input">\n\t\t\t<input name="amount" class="form-control" type="number" min="1">\n\t\t\t<span cewt-ref="denom" class="trade-amount-denom">Shares</span>\n\t\t</label>\n\t\t<div class="trade-amount-balance">\n\t\t\tCurrent shares: <span cewt-ref="balance"></span>\n\t\t</div>\n\n\t\t<div class="trade-result">\n\t\t\tYou recieve: <br>\n\t\t\t&nbsp;<span cewt-ref="trade-result-token0">0</span> + <span cewt-ref="trade-result-token1">0</span>\n\t\t</div>\n\t\t\n\t\t<input name="pool" type="hidden">\n\t\t<button class="primary trade-execute">Withdraw</button>\n\t\t<button cewt-ref="btn-cancel">Cancel</button>\n\t</form>\n'),vs).content.cloneNode(!0)),this.setAttribute("is","farm-pool-withdraw-dialog"),this.refs=new gs(this)}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}static registerElement(){customElements.define("farm-pool-withdraw-dialog",this,{extends:"dialog"})}}function ks(e){const t={},[s,n]=e instanceof HTMLFormElement?[e,null]:[e.target,e.submitter];for(let e=0;e<s.elements.length;e+=1){const i=s.elements[e];if(i instanceof HTMLButtonElement)i==n&&i.name&&(t[i.name]=i.value);else if(i instanceof HTMLInputElement)switch(i.type){case"checkbox":t[i.name]=i.checked;break;case"datetime-local":t[i.name]=i.valueAsDate;break;case"file":t[i.name]=i.files;break;case"number":case"range":t[i.name]=i.valueAsNumber;break;case"radio":if(i.checked){t[i.name]=i.value;break}break;default:t[i.name]=i.value}else(i instanceof HTMLOutputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement)&&(t[i.name]=i.value)}return t}var xs,ys,Ts,Cs=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},Es=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class Ms extends bs{constructor(){super(),xs.set(this,null),ys.set(this,!1),Ts.set(this,!1),this.refs.btnCancel.addEventListener("click",(e=>{e.preventDefault(),this.close()})),this.addEventListener("close",(e=>{this.remove()})),this.refs.form.elements.amount.addEventListener("input",(e=>{this.refreshTradeOutput()})),this.addEventListener("submit",(e=>{const t=this.refs.form,s=t.elements.pool.value;A((async()=>{try{J(!0,"Waiting for transaction confirmation...");const[e,n]=await Promise.all([B.k2.get(),this.swapMarket()]),i=n.getPairFromName(s),{transactionHash:a}=await e.executeContractMulti(i.buildWithdrawLiquidityIxs(BigInt(t.elements.amount.value)))}finally{J(!1)}}))}))}invalidateSwapMarket(){Cs(this,xs,null,"f")}async swapMarket(){if(null==Es(this,xs,"f")){const e=await B.k2.get(),t=await Ae.getFromChainId(e.wasmClient,e.chainId);await t.refresh(),Cs(this,xs,t,"f")}return Es(this,xs,"f")}refreshBalances(){this.refs.balance.innerText="",this.refs.balance.classList.add("lazy-loading-text-2"),A((async()=>{try{const[e,t]=await Promise.all([B.k2.get(),this.swapMarket()]),s=t.getPairFromName(this.refs.form.elements.pool.value);this.refs.balance.innerText=(await e.getBalance(s.sharesDenom)).toString()}catch(e){throw this.refs.balance.innerText||(this.refs.balance.innerText="[Error]"),e}finally{this.refs.balance.classList.remove("lazy-loading-text-2")}}))}refreshTradeOutput(){Cs(this,ys,!0,"f"),Es(this,Ts,"f")||(Cs(this,Ts,!0,"f"),(async()=>{do{Cs(this,ys,!1,"f"),this.refs.tradeResultToken0.innerText="",this.refs.tradeResultToken0.classList.add("lazy-loading-text-2"),this.refs.tradeResultToken1.innerText="",this.refs.tradeResultToken1.classList.add("lazy-loading-text-2"),await new Promise((e=>setTimeout(e,500)));const e=(await this.swapMarket()).getPairFromName(this.refs.form.elements.pool.value).shareValue(BigInt(this.refs.form.elements.amount.value));this.refs.tradeResultToken0.innerText=(0,B.wt)(...e[0]),this.refs.tradeResultToken1.innerText=(0,B.wt)(...e[1])}while(Es(this,ys,"f"))})().catch(console.error).finally((()=>{Cs(this,Ts,!1,"f"),this.refs.tradeResultToken0.classList.remove("lazy-loading-text-2"),this.refs.tradeResultToken1.classList.remove("lazy-loading-text-2")})))}connectedCallback(){this.showModal(),this.refreshBalances()}}xs=new WeakMap,ys=new WeakMap,Ts=new WeakMap,Ms.registerElement();var Ss,Ls,Ws,Ps,qs=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},Is=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class _s extends ws{constructor(){super(),Ss.set(this,null),Ls.set(this,!1),Ws.set(this,!1),Ps.set(this,void 0),this.refs.btnCancel.addEventListener("click",(e=>{e.preventDefault(),this.close()})),this.refs.form.elements["deposit-type"].forEach((e=>{e.addEventListener("input",(e=>{this.refreshTradeInputs()}))})),this.refs.form.elements.amount0.addEventListener("input",(e=>{this.refreshTradeInputs("amount0")})),this.refs.form.elements.amount1.addEventListener("input",(e=>{this.refreshTradeInputs("amount1")})),this.refs.form.elements.result.addEventListener("input",(e=>{this.refreshTradeInputs("result")})),this.addEventListener("close",(e=>{this.remove()})),this.addEventListener("submit",(e=>{const t=this.refs.form,s=t.elements.pool.value;J(!0,"Waiting for transaction confirmation..."),A((async()=>{try{const[e,n]=await Promise.all([B.k2.get(),this.swapMarket()]),i=n.getPairFromName(s);if(null==i)return;const{decimals:a}=(0,B.kh)(i.assets[0])||{decimals:0},{decimals:r}=(0,B.kh)(i.assets[1])||{decimals:0},o=(0,B.Jd)(t.elements.amount0.value,a),l=(0,B.Jd)(t.elements.amount1.value,r);if(null==o||null==l)return;const{transactionHash:c}=await e.executeContractMulti(i.buildProvideLiquidityIxs(o,l,.5))}finally{J(!1)}}))})),this.refs.tradeWarning.hidden=!0}invalidateSwapMarket(){qs(this,Ss,null,"f")}async swapMarket(){if(null==Is(this,Ss,"f")){const e=await B.k2.get(),t=await Ae.getFromChainId(e.wasmClient,e.chainId);await t.refresh(),qs(this,Ss,t,"f")}return Is(this,Ss,"f")}refreshBalances(){this.refs.balanceToken0.innerText="",this.refs.balanceToken1.innerText="",this.refs.balanceResult.innerText="",this.refs.denomToken0.innerText="",this.refs.denomToken1.innerText="",this.refs.balanceToken0.classList.add("lazy-loading-text-2"),this.refs.balanceToken1.classList.add("lazy-loading-text-2"),this.refs.balanceResult.classList.add("lazy-loading-text-2"),this.refs.denomToken0.classList.add("lazy-loading-text-2"),this.refs.denomToken1.classList.add("lazy-loading-text-2"),A((async()=>{try{const[e,t]=await Promise.all([B.k2.get(),this.swapMarket()]),s=t.getPairFromName(this.refs.form.elements.pool.value),n=(0,B.kh)(s.assets[0]),i=(0,B.kh)(s.assets[1]);this.refs.denomToken0.classList.remove("lazy-loading-text-2"),this.refs.denomToken1.classList.remove("lazy-loading-text-2"),this.refs.denomToken0.innerText=n.symbol,this.refs.denomToken1.innerText=i.symbol,this.refs.form.elements.amount0.step=(10**-n.decimals).toString(),this.refs.form.elements.amount1.step=(10**-i.decimals).toString(),this.refs.balanceToken0.innerText=(0,B.wt)(await e.getBalance(s.assets[0]),s.assets[0]),this.refs.balanceToken0.classList.remove("lazy-loading-text-2"),this.refs.balanceToken1.innerText=(0,B.wt)(await e.getBalance(s.assets[1]),s.assets[1]),this.refs.balanceToken1.classList.remove("lazy-loading-text-2"),this.refs.balanceResult.innerText=(await e.getBalance(s.sharesDenom)).toString(),this.refs.balanceResult.classList.remove("lazy-loading-text-2")}catch(e){throw this.refs.balanceToken0.innerText||(this.refs.balanceToken0.innerText="[Error]"),this.refs.balanceToken1.innerText||(this.refs.balanceToken1.innerText="[Error]"),this.refs.balanceResult.innerText||(this.refs.balanceResult.innerText="[Error]"),e}finally{this.refs.balanceToken0.classList.remove("lazy-loading-text-2"),this.refs.balanceToken1.classList.remove("lazy-loading-text-2"),this.refs.balanceResult.classList.remove("lazy-loading-text-2"),this.refs.denomToken0.classList.remove("lazy-loading-text-2"),this.refs.denomToken1.classList.remove("lazy-loading-text-2")}}))}refreshTradeInputs(e){qs(this,Ls,!0,"f"),qs(this,Ps,e,"f"),Is(this,Ws,"f")||(qs(this,Ws,!0,"f"),(async()=>{do{qs(this,Ls,!1,"f");const e=(await this.swapMarket()).getPairFromName(this.refs.form.elements.pool.value),t=this.refs.form;switch(t.values()["deposit-type"]){case"current":switch(t.elements.result.readOnly=!1,Is(this,Ps,"f")){case"amount0":{const s=(0,B.Jd)(t.elements.amount0.value,(0,B.kh)(e.assets[0]).decimals)??0n,n=e.exchangeValue(s);t.elements.amount1.value=(0,B.Zy)(n,(0,B.kh)(e.assets[1]).decimals),t.elements.result.value=e.calculateProvideLiquidity(s,n).newShares+"";break}case"amount1":{const s=(0,B.Jd)(t.elements.amount1.value,(0,B.kh)(e.assets[1]).decimals)??0n,n=e.exchangeValue(s,!0);t.elements.amount0.value=(0,B.Zy)(n,(0,B.kh)(e.assets[0]).decimals),t.elements.result.value=e.calculateProvideLiquidity(n,s).newShares+"";break}case void 0:case"result":{const[[s,n],[i,a]]=e.shareValue(BigInt(t.elements.result.value));t.elements.amount0.value=(0,B.Zy)(s,(0,B.kh)(e.assets[0]).decimals),t.elements.amount1.value=(0,B.Zy)(i,(0,B.kh)(e.assets[1]).decimals);break}}break;case"imbalanced":t.elements.result.readOnly=!0,t.elements.result.value=""}}while(Is(this,Ls,"f"))})().catch(console.error).finally((()=>{qs(this,Ws,!1,"f")})))}connectedCallback(){this.showModal(),this.refreshBalances()}}Ss=new WeakMap,Ls=new WeakMap,Ws=new WeakMap,Ps=new WeakMap,_s.registerElement();var Bs,Ds=function(e,t,s,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,s):i?i.value=s:t.set(e,s),s},As=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class Hs extends os{constructor(){super(),Bs.set(this,null),this.refs.bigChestTvl.innerText="",this.refs.bigChestTvl.classList.add("lazy-loading-text-4"),this.refs.bigChestTotalTraded.innerText="",this.refs.bigChestTotalTraded.classList.add("lazy-loading-text-4"),this.refs.bigChestVolume24H.innerText="",this.refs.bigChestVolume24H.classList.add("lazy-loading-text-4"),this.rebuildPoolList()}invalidateSwapMarket(){Ds(this,Bs,null,"f")}async swapMarket(){if(null==As(this,Bs,"f")){const e=await B.k2.get(),t=await Ae.getFromChainId(e.wasmClient,e.chainId);await t.refresh(),Ds(this,Bs,t,"f")}return As(this,Bs,"f")}rebuildPoolList(){for(;this.refs.poolList.lastElementChild instanceof Ns||this.refs.poolList.lastElementChild instanceof zs;)this.refs.poolList.lastElementChild.remove();const e=[];for(let t=0;t<3;t+=1)e[t]=new Ns,this.refs.poolList.append(e[t]),e[t].classList.add("lazy-loading");A((async()=>{const t=await this.swapMarket();this.refreshGlobalStats();const s=t.getAllPairs();s.length<e.length&&e.splice(s.length).forEach((e=>e.remove()));for(let t=0;t<e.length;t+=1)e[t].pool=s[t].name,e[t].refreshPoolStats();for(let t=e.length;t<s.length;t+=1){const e=new Ns;e.pool=s[t].name,this.refs.poolList.append(e),e.refreshPoolStats()}}))}refreshGlobalStats(){const{bigChestTvl:e,bigChestTotalTraded:t,bigChestVolume24H:s}=this.refs;e.innerText="",e.classList.add("lazy-loading-text-4"),t.innerText="",t.classList.add("lazy-loading-text-4"),s.innerText="",s.classList.add("lazy-loading-text-4"),A((async()=>{const n=await this.swapMarket(),i="usei";let a=0n;for(const e of n.getAllPairs())a+=n.exchangeValue(e.totalDeposits[0],e.assets[0],i)??0n,a+=n.exchangeValue(e.totalDeposits[1],e.assets[1],i)??0n;e.innerText=(0,B.wt)(a,i,!0),e.classList.remove("lazy-loading-text-4"),t.innerText="[TODO]",t.classList.remove("lazy-loading-text-4"),s.innerText="[TODO]",s.classList.remove("lazy-loading-text-4")}))}static findFromParent(e){for(;!(e instanceof Hs);){if(null==e)return null;e=e.parentElement}return e}}Bs=new WeakMap,Hs.registerElement(),B.Zm.on("defaultNetworkChanged",(e=>{V('div[is="farm-pool-component"]').forEach((e=>{e.invalidateSwapMarket(),e.rebuildPoolList()}))}));class Ns extends hs{constructor(){super(),this.refs.btnExpand.addEventListener("click",(e=>{if(this.classList.contains("expanded"))this.nextElementSibling instanceof zs&&this.nextElementSibling.remove(),this.classList.remove("expanded");else{const e=new zs;e.pool=this.pool,this.after(e),e.refreshBalances(),this.classList.add("expanded")}}))}onPoolChanged(e,t){t?(this.refs.btnExpand.disabled=!1,this.classList.remove("lazy-loading"),this.refs.poolName.innerText=t,this.refreshPoolStats()):(this.refs.btnExpand.disabled=!0,this.classList.add("lazy-loading"))}refreshPoolStats(){const e=Hs.findFromParent(this);if(null==e)return;const{exchangeRate:t,totalDeposits:s,feeRate:n,volume24H:i,apy:a}=this.refs;t.innerText="",t.classList.add("lazy-loading-text-2"),s.innerHTML='<span class="lazy-loading-text-4"></span><br><span class="lazy-loading-text-4"></span>',n.innerText="",n.classList.add("lazy-loading-text-2"),i.innerText="[TODO]",a.innerText="[TODO]",A((async()=>{const i=(await e.swapMarket()).getPairFromName(this.pool+""),a=(0,B.kh)(i.assets[0]),r=(0,B.kh)(i.assets[1]);t.innerText="1 "+a.symbol+" = "+i.exchangeRate().toFixed(r.decimals)+" "+r.symbol,t.classList.remove("lazy-loading-text-2"),s.innerText=i.totalDeposits.map(((e,t)=>(0,B.wt)(e,i.assets[t]))).join("\n"),n.innerText=(i.totalFeeBasisPoints/100).toFixed(2)+"%",n.classList.remove("lazy-loading-text-2"),this.refs.iconToken0.src=a.icon,this.refs.iconToken1.src=r.icon}))}}Ns.registerElement(),B.Zm.on("transactionConfirmed",(e=>{V('div[is="farm-pool-item"]').forEach((e=>{e.refreshPoolStats()}))}));class zs extends fs{constructor(){super(),this.refs.depositBtn.addEventListener("click",(e=>{const t=new _s;t.refs.form.elements.pool.value=this.pool,document.body.appendChild(t)})),this.refs.withdrawBtn.addEventListener("click",(e=>{const t=new Ms;t.refs.form.elements.pool.value=this.pool,document.body.appendChild(t)}))}refreshBalances(){const e=Hs.findFromParent(this);null!=e&&(this.refs.withdrawBtn.disabled=!0,this.refs.depositBtn.disabled=!0,this.refs.depositTxt.innerText="",this.refs.depositTxt.classList.add("lazy-loading-text-2"),this.refs.withdrawTxt.innerText="",this.refs.withdrawTxt.classList.add("lazy-loading-text-2"),A((async()=>{try{const[t,s]=await Promise.all([e.swapMarket().then((e=>e.getPairFromName(this.pool+""))),B.k2.get()]);if(null==t||null==s.account)return this.refs.depositTxt.innerText="[Not connected]",this.refs.depositTxt.classList.remove("lazy-loading-text-2"),this.refs.withdrawTxt.innerText="[Not connected]",void this.refs.withdrawTxt.classList.remove("lazy-loading-text-2");this.refs.withdrawBtn.disabled=!1,this.refs.depositBtn.disabled=!1;const n=await s.getBalance(t.sharesDenom);this.refs.depositTxt.innerText=n+"",this.refs.withdrawTxt.innerText=t.shareValue(n).map((e=>(0,B.wt)(...e))).join("\n")}catch(e){throw this.refs.depositTxt.innerText||(this.refs.depositTxt.innerText="[Error]"),this.refs.withdrawTxt.innerText||(this.refs.withdrawTxt.innerText="[Error]"),e}finally{this.refs.depositTxt.classList.remove("lazy-loading-text-2"),this.refs.withdrawTxt.classList.remove("lazy-loading-text-2")}})))}onPoolChanged(e,t){this.refreshBalances()}}function Os(){V(".header .header-links a").forEach((e=>{e.classList.remove("highlighted")}))}async function Rs(){const e=j("#swap-link"),t=j("#farm-link"),s=j("#main-content");e.onclick=t=>{t.preventDefault(),Os(),A((async()=>{s.innerHTML="";const e=new dt;e.className="border-img-scroll-25",s.appendChild(e)})),e.classList.add("highlighted")},t.onclick=e=>{e.preventDefault(),Os(),A((async()=>{s.innerHTML="",s.appendChild(new Hs)})),t.classList.add("highlighted")};let n=localStorage.getItem("preferred_sei_network");null==n&&(n=document.location.host.startsWith("127.0.0.1")||document.location.host.startsWith("localhost")?"sei-chain":"atlantic-2"),(0,B.qv)(n);let i=localStorage.getItem("preferred_sei_provider");B.k2.setDefaultProvider(i,!0),e.click(),J(!1)}zs.registerElement(),B.Zm.on("transactionConfirmed",(e=>{V('div[is="farm-pool-item-options"]').forEach((e=>{e.refreshBalances()}))})),B.Zm.on("defaultProviderChanged",(e=>{V('div[is="farm-pool-item-options"]').forEach((e=>{e.refreshBalances()}))})),B.Zm.on("defaultProviderChanged",(({provider:e,chainId:t})=>{e?localStorage.setItem("preferred_sei_provider",e):localStorage.removeItem("preferred_sei_provider"),localStorage.setItem("preferred_sei_network",t)}))},15232:()=>{},11164:()=>{},93907:()=>{},8056:()=>{},91324:()=>{},31795:()=>{},48775:()=>{},47750:()=>{}}]);