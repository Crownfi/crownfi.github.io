(()=>{"use strict";var e,t,n,i,s={},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return s[e](n,n.exports,r),n.exports}r.m=s,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var s=Object.create(null);r.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,r.d(s,o),s},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="@crownfi/css-gothic-fantasy:",r.l=(e,t,s,o)=>{if(n[e])n[e].push(t);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==i+s){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",i+s),a.src=e),n[e]=[t];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(m);var s=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(i))),t)return t(i)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={256:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((n,s)=>i=e[t]=[n,s]));n.push(i[2]=s);var o=r.p+r.u(t),a=new Error;r.l(o,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,s,[o,a,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);l&&l(r)}for(t&&t(n);c<o.length;c++)s=o[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunk_crownfi_css_gothic_fantasy=self.webpackChunk_crownfi_css_gothic_fantasy||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{function e(e="0s"){if(!e)return 0;let[t,n,i,s]=(()=>{const t=e.match(/^\s*([+-]?)([0-9.-]+)(s|ms)\s*$/i);return null==t?["","","NaN","ms"]:t})(),o=Number(i);return"s"===s.toLowerCase()&&(o*=1e3),o=Math.ceil(o),"-"===n&&(o*=-1),o}function t(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}const n=1e-7,i=12;function s(e){return e<=0?0:e>=1?1:e}function o(e,o,r,a){if(e===o&&r===a)return s;return s=>s<=0?0:s>=1?1:t(function(e,s,o,r,a){let l,c,d=0;do{c=s+(o-s)/2,l=t(c,r,a)-e,l>0?o=c:s=c}while(Math.abs(l)>n&&++d<i);return c}(s,0,1,e,r),o,a)}const a={ease:o(.25,.1,.25,1),linear:s,"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"step-start":e=>e>0?1:0,"step-end":e=>e<1?0:1};function l(e){if(e in a)return a[e];const[t,n,i,r,l]=(()=>{const t=e.match(/^\s*cubic-bezier\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)\s*;?\s*$/i);return null==t?[NaN,NaN,NaN,NaN,NaN]:t.map(Number)})();if(!(isNaN(n)||isNaN(i)||isNaN(r)||isNaN(l)))return o(n,i,r,l);let c=e.match(/^\s*steps\(\s*([0-9.-]+)\s*,\s*(.+)\s*\)\s*;?\s*$/);if(null!=c)return function(e,t){if(!(isNaN(e)||e<=0))switch(t){case"start":case"jump-start":return t=>t<=0?0:t>=1?1:Math.ceil(t*e)/e;case"end":case"jump-end":return t=>t<=0?0:t>=1?1:Math.floor(t*e)/e;case"jump-none":return t=>t<=0?0:t>=1?1:Math.floor(t*e)/(e-1);case"jump-both":return t=>t<=0?0:t>=1?1:Math.min(Math.floor(t*e)/(e+1)+1/(e+1),1);default:return}}(Number(c[1]),c[2]);if(c=e.match(/^\s*linear\(\s*([0-9.,% -]+\s*)+\s*\)\s*;?\s*$/),null==c)return;const d=[],u=c[1].split(",");for(let e=0;e<u.length;e+=1){const t=u[e].match(/^\s*([0-9.-]+)\s*(?:\s+([0-9.-]+)%\s*)?(?:\s+([0-9.-]+)%\s*)?$/);if(null==t)return;const n=Number(t[1]);if(isNaN(n))return;const i=t[2]?Number(t[2])/100:void 0;if(null!=i&&isNaN(n))return;if(d.push([n,i]),t[3]){const e=Number(t[3])/100;if(isNaN(e))return;d.push([n,e])}}return(h=d).length?(function(e){if(e.length){null==e[0][1]&&(e[0][1]=0),null==e[e.length-1][1]&&(e[e.length-1][1]=1);for(let t=0;t<e.length;t+=1)if(null==e[t][1]){const n=e[t-1][1],[i,s]=(()=>{for(let n=t;n<e.length;n+=1)if(null!=e[n][1])return[e[n][1],n];throw new Error("2+2=5")})(),o=s-t;for(let r=t;r<s;r+=1){const s=(r-t+1)/(o+1);e[r][1]=n*(1-s)+i*s}t+=o}}}(h),e=>{e<0?e=0:e>1&&(e=1);for(let t=0;t<h.length;t+=1)if(e<h[t][1]){const n=h[t-1][0]??0,i=h[t][0],s=(e-(h[t-1][1]??0))/(h[t][1]-(h[t-1][1]??0));return n*(1-s)+i*s}return h[h.length-1][1]}):s;var h}let c,d;const u=document.querySelector.bind(document);function h(e){e.preventDefault()}function m(e){e.hidden=!0,e.style.display="none"}let p=Boolean(document.documentElement.dataset.allowEvilAttributes);class g extends HTMLElement{static get observedAttributes(){return["click-trigger","linked-elements","ondropdownselect","ondropdownopen","open-position"]}static allowEvilAttributes(e){p=e}constructor(){super(),this.addEventListener("dropdownSelect",(e=>{null!=this.#e&&!1===this.#e(e.detail)&&e.preventDefault()})),this.addEventListener("dropdownOpen",(e=>{null!=this.#t&&!1===this.#t(e.detail)&&e.preventDefault()}))}open(e){this.handleEvent(e)}close(){w&&w.originalRootMenu==this&&w.close()}handleEvent(e){if(e.currentTarget instanceof Element){if(w&&w.originalRootMenu==this)return e.preventDefault(),void w.close();if(this.dispatchEvent(new CustomEvent("dropdownOpen",{cancelable:!0,detail:{dropdownMenu:this,triggeringElement:e.currentTarget}}))&&e.currentTarget.dispatchEvent(new CustomEvent("dropdownOpen",{bubbles:!0,cancelable:!0,detail:{dropdownMenu:this,triggeringElement:e.currentTarget}}))){e.preventDefault();const t=new v({menuTemplate:this,originalRootMenu:this,originalTriggeringElement:e.currentTarget});t.style.setProperty("--triggering-element-client-width",e.currentTarget.clientWidth+"px"),t.style.setProperty("--triggering-element-client-height",e.currentTarget.clientHeight+"px"),e.currentTarget instanceof HTMLElement&&(t.style.setProperty("--triggering-element-offset-width",e.currentTarget.offsetWidth+"px"),t.style.setProperty("--triggering-element-offset-height",e.currentTarget.clientHeight+"px")),t.open(e,this.openPosition)}}}#e=null;get ondropdownselect(){return this.#e}set ondropdownselect(e){null==e?this.removeAttribute("ondropdownselect"):"string"!=typeof e?(this.setAttribute("ondropdownselect","function () { [hidden code] }"),this.#e=e):this.setAttribute("ondropdownselect",e)}#t=null;get ondropdownopen(){return this.#t}set ondropdownopen(e){null==e?this.removeAttribute("ondropdownopen"):"string"!=typeof e?(this.setAttribute("ondropdownopen","function () { [hidden code] }"),this.#e=e):this.setAttribute("ondropdownopen",e)}#n=null;#i=null;get linkedElements(){return this.#i}set linkedElements(e){null==e?this.removeAttribute("linked-elements"):this.setAttribute("linked-elements",e)}refreshLinkedElements(){if(this.#n&&(this.#n.forEach((e=>{"menu"!=e.ariaHasPopup&&"true"!=e.ariaHasPopup||(e.ariaHasPopup=null),e.removeEventListener("click",this),e.removeEventListener("contextmenu",this)})),this.#n=null),this.#i&&this.isConnected)try{this.id||(this.id="this"),this.#n=this.getRootNode().querySelectorAll(this.#i),this.#n.forEach((e=>{switch(this.#s){case"primary":e.addEventListener("click",this),(e instanceof HTMLButtonElement||"button"==e.getAttribute("role"))&&(e.ariaHasPopup="menu");break;case"secondary":e.addEventListener("contextmenu",this)}}))}finally{"this"==this.id&&(this.id="")}}#s="secondary";get clickTrigger(){return this.#s}set clickTrigger(e){null==e?this.removeAttribute("click-trigger"):this.setAttribute("click-trigger",g.normalizeClickTriggerAttribute(e))}static normalizeClickTriggerAttribute(e){return"primary"==e?"primary":"secondary"}#o=null;get openPosition(){return this.#o?this.#o:"primary"==this.#s?"element-bottom-rightward":"pointer"}set openPosition(e){const t=g.normalizeOpenPositionAttribute(e);null==t?this.removeAttribute("click-trigger"):this.setAttribute("click-trigger",t)}static normalizeOpenPositionAttribute(e){switch(e){case"element-bottom-centered":case"element-bottom-leftward":case"element-bottom-rightward":case"element-left-centered":case"element-left-downward":case"element-left-upward":case"element-right-centered":case"element-right-downward":case"element-right-upward":case"element-top-centered":case"element-top-leftward":case"element-top-rightward":case"pointer":return e;default:return null}}attributeChangedCallback(e,t,n){switch(e){case"ondropdownselect":null==n?this.#e=null:"function () { [hidden code] }"!=n&&p&&(this.#e=new Function("details",n));break;case"ondropdownopen":null==n?this.#t=null:"function () { [hidden code] }"!=n&&p&&(this.#t=new Function("details",n));break;case"linked-elements":this.#i=n,this.refreshLinkedElements();break;case"click-trigger":this.#s=g.normalizeClickTriggerAttribute(n),this.refreshLinkedElements();break;case"open-position":this.#o=g.normalizeOpenPositionAttribute(n)}}connectedCallback(){m(this),this.refreshLinkedElements()}disconnectedCallback(){this.refreshLinkedElements()}adoptedCallback(){this.refreshLinkedElements()}}customElements.define("dropdown-menu",g);class f extends HTMLElement{static get observedAttributes(){return["value","disabled"]}constructor(){super()}#r=!1;get disabled(){return this.#r}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#a;get value(){return this.#a}set value(e){"string"==typeof e?this.setAttribute("value",e):this.removeAttribute("value")}attributeChangedCallback(e,t,n){switch(e){case"disabled":this.#r=null!=n;break;case"value":this.#a=n??void 0}}}customElements.define("dropdown-menu-item",f);class b extends HTMLElement{constructor(){super()}validChild(){return"DROPDOWN-MENU-ITEM"==this.parentElement?.tagName&&("DROPDOWN-MENU"==this.parentElement.parentElement?.tagName||"DROPDOWN-MENU-INNER"==this.parentElement.parentElement?.tagName)||"FORM"==this.parentElement?.tagName&&"DROPDOWN-MENU-ITEM"==this.parentElement.parentElement?.tagName&&("DROPDOWN-MENU"==this.parentElement.parentElement.parentElement?.tagName||"DROPDOWN-MENU-INNER"==this.parentElement.parentElement.parentElement?.tagName)}connectedCallback(){this.validChild()||console.error("<dropdown-menu-inner> has been used in a place which is inappropriate. Only the following tree states are valid: *:is(dropdown-menu-inner, dropdown-menu) > dropdown-menu-item > dropdown-menu-inner, *:is(dropdown-menu-inner, dropdown-menu) > dropdown-menu-item > form > dropdown-menu-inner")}adoptedCallback(){this.connectedCallback()}}customElements.define("dropdown-menu-inner",b);let w=null;document.addEventListener("contextmenu",(e=>{if(w){const t=e.target;if(w.contains(t)||"secondary"==w.originalRootMenu.clickTrigger&&w.triggeringElement.contains(t))return;w.close(),e.preventDefault()}}));let E=!1;document.addEventListener("click",(e=>{if(E="undefined"!=typeof PointerEvent&&Object.getPrototypeOf(e).constructor==PointerEvent,w){const t=e.target;if(w.contains(t)||"primary"==w.originalRootMenu.clickTrigger&&w.triggeringElement.contains(t))return;w.close()}}));class v extends HTMLElement{static getActiveRoot(){return w}static closeActiveRoot(){w&&w.close()}#l;_getFormContext(e){const t=this.#c,n=t.#l;let i=n.get(e);return i||(i=new M({originalElement:e}),n.set(e,i),t.appendChild(i)),i}_addFormContext(e,t){this.#c.#l.set(e,t)}#c;get rootMenu(){return this.#c}#d;get triggeringElement(){return this.#d}#u;get originalRootMenu(){return this.#u}#h;get originalTriggeringElement(){return this.#h}constructor(e){if(!e)throw new Error("<active-dropdown-menu> isn't designed to be used on its own");super();const{menuTemplate:t,rootMenu:n,triggeringElement:i=e.originalTriggeringElement,originalRootMenu:s,originalTriggeringElement:o}=e;n||(this.#l=new Map),this.addEventListener("contextmenu",(e=>{e.preventDefault()})),this.#m=t,this.#c=n??this,this.#d=i,this.#u=s,this.#h=o}#m;#p;connectedCallback(){if(this.setAttribute("role","menu"),this.style.position="absolute",this.style.zIndex=2**30+"",this.inert=!0,m(this),0==this.childElementCount){this.classList.value=this.#m.classList.value;for(let e=0;e<this.#m.childElementCount;e+=1){const t=this.#m.children[e];t instanceof HTMLHRElement?this.appendChild(t.cloneNode(!0)):t instanceof f&&this.appendChild(new y({parentMenu:this,originalElement:t}))}}this.#p&&(this.open(...this.#p),this.#p=void 0)}get firstMenuItem(){let e=this.firstElementChild;for(;null!=e&&(!(e instanceof y)||e.disabled);)e=e.nextElementSibling;return e}get lastMenuItem(){let e=this.lastElementChild;for(;null!=e&&(!(e instanceof y)||e.disabled);)e=e.previousElementSibling;return e}#g=0;get pageXPos(){return this.#g}#f=0;get pageYPos(){return this.#f}#b;open(e,t){if(!this.isConnected)return w&&w.close(),w=this,this.#p=[e,t],void document.body.append(this);if(!this.inert)return;null!=this.#b&&clearTimeout(this.#b);const n=Math.floor(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)),i=Math.floor(Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth));var s;this.classList.remove("dropdown-closing","dropdown-upward","dropdown-downward","dropdown-leftward","dropdown-rightward"),(s=this).hidden=!1,s.style.display="";let o=0,r=0;const a="pointer"==t?new DOMRect:this.triggeringElement.getBoundingClientRect(),l=a.left+window.scrollX,c=a.right+window.scrollX,d=a.top+window.scrollY,u=a.bottom+window.scrollY;switch(t){case"element-bottom-centered":case"element-bottom-leftward":case"element-bottom-rightward":u+this.clientHeight>n&&d-this.clientHeight>0&&(t="element-top-"+t.substring(15));break;case"element-left-centered":case"element-left-downward":case"element-left-upward":l-this.clientWidth<0&&c+this.clientWidth<i&&(t="element-right-"+t.substring(13));break;case"element-right-centered":case"element-right-downward":case"element-right-upward":c+this.clientWidth>i&&l-this.clientWidth>0&&(t="element-left-"+t.substring(14));break;case"element-top-centered":case"element-top-leftward":case"element-top-rightward":d-this.clientHeight<0&&u+this.clientHeight<n&&(t="element-bottom-"+t.substring(12))}switch(this.offsetWidth,t){case"element-bottom-centered":o=Math.round((l+c)/2-this.offsetWidth/2),r=Math.ceil(u),this.classList.add("dropdown-downward");break;case"element-bottom-leftward":o=Math.round(c-this.offsetWidth),r=Math.ceil(u),this.classList.add("dropdown-downward");break;case"element-bottom-rightward":o=Math.round(l),r=Math.ceil(u),this.classList.add("dropdown-downward");break;case"element-left-centered":o=Math.floor(l-this.offsetWidth),r=Math.round((d+u)/2-this.clientHeight/2),this.classList.add("dropdown-leftward");break;case"element-left-downward":o=Math.floor(l-this.offsetWidth),r=Math.round(d),this.classList.add("dropdown-leftward");break;case"element-left-upward":o=Math.floor(l-this.offsetWidth),r=Math.round(u-this.clientHeight),this.classList.add("dropdown-leftward");break;case"element-right-centered":o=Math.ceil(c),r=Math.round((d+u)/2-this.clientHeight/2),this.classList.add("dropdown-rightward");break;case"element-right-downward":o=Math.ceil(c),r=Math.round(d),this.classList.add("dropdown-rightward");break;case"element-right-upward":o=Math.ceil(c),r=Math.round(u-this.clientHeight),this.classList.add("dropdown-rightward");break;case"element-top-centered":o=Math.round((l+c)/2-this.offsetWidth/2),r=Math.floor(d-this.clientHeight),this.classList.add("dropdown-upward");break;case"element-top-leftward":o=Math.round(c-this.offsetWidth),r=Math.floor(d-this.clientHeight),this.classList.add("dropdown-upward");break;case"element-top-rightward":o=Math.round(l),r=Math.floor(d-this.clientHeight),this.classList.add("dropdown-upward");break;case"pointer":o=Math.ceil(e.pageX),r=Math.ceil(e.pageY),e.pageY+this.clientHeight>n?e.pageX+this.clientWidth>i?(o-=this.offsetWidth,this.classList.add("dropdown-leftward")):this.classList.add("dropdown-rightward"):this.classList.add("dropdown-downward")}o-=Math.max(0,o+this.clientWidth-i),o=Math.max(0,o),r-=Math.max(0,r+this.clientHeight-n),r=Math.max(0,r),this.#g=o,this.#f=r,this.triggeringElement.parentElement instanceof v&&(o-=this.triggeringElement.parentElement.pageXPos,r-=this.triggeringElement.parentElement.pageYPos,o-=(this.triggeringElement.parentElement.offsetWidth-this.triggeringElement.parentElement.clientWidth)/2,r-=(this.triggeringElement.parentElement.offsetHeight-this.triggeringElement.parentElement.clientHeight)/2,r-=this.offsetHeight-this.clientHeight),this.style.left=o+"px",this.style.top=r+"px",this.inert=!1,null!=document.querySelector(":focus-visible")&&this.firstMenuItem?.focus()}closeSubMenu(e){const t=this.querySelector("active-dropdown-menu:not([inert])");null!=t&&t!=e&&t.close()}focusDefaultItem(){const e=this.querySelector("active-dropdown-menu:not([inert])");null==e?this.firstMenuItem?.focus():e.focusDefaultItem()}close(){if(this.inert)return;this.inert=!0;const{animation:t}=getComputedStyle(this);this.classList.add("dropdown-closing");const{animationDelay:n,animationDuration:i,animationIterationCount:s,animationFillMode:o,animation:r}=getComputedStyle(this),a=e(n)+e(i)*Number(s);t==r||isNaN(a)||a<=0?this.#c==this?this.remove():(m(this),this.querySelectorAll("active-dropdown-menu:not([inert])").forEach((e=>{e.inert=!0,m(e)}))):("none"==o&&console.warn('<active-dropdown-menu class="'+this.classList.value+'"> has a closing animation with "animation-fill-mode" set/defaulting to "none". This may result in perceived graphical glitches. If this effect is unintentional, try setting the "animation-fill-mode" CSS property to "forwards".'),this.style.animation="none",this.offsetHeight,this.style.animation="",this.#b=setTimeout((()=>{this.#c==this?this.remove():(m(this),this.querySelectorAll("active-dropdown-menu:not([inert]").forEach((e=>{e.inert=!0,m(e)})))}),a+35)),w==this&&(w=null),this.triggeringElement instanceof HTMLElement&&this.triggeringElement.tabIndex>=0&&this.triggeringElement.focus()}}customElements.define("active-dropdown-menu",v);class y extends HTMLElement{#w;#E;constructor(e){if(!e)throw new Error("<active-dropdown-menu-item> isn't designed to be used on its own");super(),this.#w=e.parentMenu,this.#E=e.originalElement}connectedCallback(){const e=this.#w,t=this.#E;let n;this.style.whiteSpace="nowrap",this.style.userSelect="none",this.classList.value=t.classList.value,this.value=t.value,this.disabled=t.disabled;for(let i=0;i<t.childNodes.length;i+=1){const s=t.childNodes[i];if(s instanceof HTMLFormElement){const t=new M({originalElement:s});e._addFormContext(s,t);for(let i=0;i<s.childNodes.length;i+=1){const o=s.childNodes[i];if(o instanceof b){if(n){console.warn("Multiple <dropdown-menu-inner> elements within the same <dropdown-menu-item> element will not be handled.");continue}n=new v({menuTemplate:o,rootMenu:e.rootMenu,triggeringElement:this,originalRootMenu:e.originalRootMenu,originalTriggeringElement:e.originalTriggeringElement}),t.appendChild(n)}else(o instanceof Element||o instanceof Text)&&t.appendChild(o.cloneNode(!0))}this.appendChild(t)}else if(s instanceof b){if(n){console.warn("Multiple <dropdown-menu-inner> elements within the same <dropdown-menu-item> element will not be handled.");continue}n=new v({menuTemplate:s,rootMenu:e.rootMenu,triggeringElement:this,originalRootMenu:e.originalRootMenu,originalTriggeringElement:e.originalTriggeringElement}),this.appendChild(n)}else(s instanceof Element||s instanceof Text)&&this.appendChild(s.cloneNode(!0))}const i=t.querySelectorAll("input:not(:scope dropdown-menu-inner *)"),s=this.querySelectorAll("input:not(:scope active-dropdown-menu *)");i.length!=s.length&&console.warn("<active-dropdown-menu-item> somehow didn't properly clone the <input> elements");for(let t=0;t<Math.min(i.length,s.length);t+=1){const n=i[t],o=s[t];if(n.form){const t=e._getFormContext(n.form);o.setAttribute("form",t.id)}const r=e=>{"checkbox"==n.type||"radio"==n.type?(n.checked=o.checked,this.focus()):n.value=o.value,1==s.length&&(this.ariaChecked=o.checked+"");const t={};for(const n of Object.keys(Object.getPrototypeOf(e)).concat(...Object.keys(e)))t[n]=e[n];const i=new(Object.getPrototypeOf(e).constructor)(e.type,t);n.dispatchEvent(i)||e.preventDefault()};o.addEventListener("input",r),o.addEventListener("change",r)}1==s.length?"radio"==s[0].type?(this.setAttribute("role","menuitemradio"),s[0].tabIndex=-1,this.ariaChecked=s[0].checked+""):"checkbox"==s[0].type?(this.setAttribute("role","menuitemcheckbox"),s[0].tabIndex=-1,this.ariaChecked=s[0].checked+""):this.setAttribute("role","menuitem"):this.setAttribute("role","menuitem"),this.tabIndex=0;const o=t=>{n?.contains(t.target)||e.closeSubMenu(n)};if(this.addEventListener("click",o),this.addEventListener("mouseenter",o),this.addEventListener("focusin",o),this.addEventListener("mouseenter",(e=>{n?.contains(e.target)||this.disabled||this.focus()})),this.addEventListener("mouseleave",(e=>{n?.contains(e.target)||this.blur()})),n){let t;this.ariaHasPopup="menu",this.addEventListener("click",(e=>{n.contains(e.target)||this.disabled||(null!=t&&(clearTimeout(t),t=void 0),n.open(e,"element-right-downward"))})),this.addEventListener("mouseenter",(i=>{n.contains(i.target)||this.disabled||(t=setTimeout((()=>{e.inert||n.open(i,"element-right-downward")}),Math.min(4*Math.min(this.offsetHeight,this.offsetWidth),500)))})),this.addEventListener("mouseleave",(e=>{n.contains(e.target)||null!=t&&(clearTimeout(t),t=void 0)}))}else this.addEventListener("click",(n=>{if(this.disabled)return;const o=n.target;if(o!=this)for(let e=0;e<s.length;e+=1)if(o.contains(s[e]))return;for(let e=0;e<Math.min(i.length,s.length);e+=1){const t=i[e],n=s[e];let o=!1;"radio"==t.type?(o=!t.checked,n.checked=!0,t.checked=!0):"checkbox"==t.type&&(t.checked=!t.checked,n.checked=t.checked,o=!0),o&&(t.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!1,composed:!0})),t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!1,composed:!1})))}e.originalRootMenu.dispatchEvent(new CustomEvent("dropdownSelect",{cancelable:!0,detail:{selectedElement:this,selectedElementOriginal:t,selectedValue:this.value,dropdownMenu:e.originalRootMenu,triggeringElement:e.originalTriggeringElement}}))&&e.originalTriggeringElement.dispatchEvent(new CustomEvent("dropdownSelect",{bubbles:!0,cancelable:!0,detail:{selectedElement:this,selectedElementOriginal:t,selectedValue:this.value,dropdownMenu:e.originalRootMenu,triggeringElement:e.originalTriggeringElement}}))&&(this.classList.add("dropdown-selected"),e.rootMenu.close())}));this.addEventListener("keypress",(e=>{if(!n?.contains(e.target))switch(e.key){case" ":if(1==s.length&&("radio"==s[0].type||"checkbox"==s[0].type)){s[0].dispatchEvent(E?new PointerEvent("click",{isPrimary:!0}):new MouseEvent("click")),e.preventDefault();break}case"Enter":this.dispatchEvent(E?new PointerEvent("click",{isPrimary:!0}):new MouseEvent("click")),e.preventDefault()}})),this.addEventListener("keydown",(t=>{if(!n?.contains(t.target))switch(t.key){case"Home":e.firstMenuItem?.focus(),t.preventDefault();break;case"End":e.lastMenuItem?.focus(),t.preventDefault();break;case"ArrowUp":this.previousMenuItem?.focus(),t.preventDefault();break;case"ArrowDown":this.nextMenuItem?.focus(),t.preventDefault();break;case"Escape":case"ArrowLeft":e.close(),t.preventDefault();break;case"ArrowRight":n&&(n.open(E?new PointerEvent("click",{isPrimary:!0}):new MouseEvent("click"),"element-right-downward"),n.firstMenuItem?.focus()),t.preventDefault();break;case"Tab":t.shiftKey?this==e.firstMenuItem&&(t.preventDefault(),e.close()):this==e.lastMenuItem&&(t.preventDefault(),e.close())}}))}static get observedAttributes(){return["value","disabled"]}#r=!1;get disabled(){return this.#r}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}#a;get value(){return this.#a}set value(e){"string"==typeof e?this.setAttribute("value",e):this.removeAttribute("value")}attributeChangedCallback(e,t,n){switch(e){case"disabled":this.#r=null!=n,this.ariaDisabled=this.#r+"",this.inert=this.#r;break;case"value":this.#a=n??void 0}}get nextMenuItem(){let e=this.nextElementSibling;for(;null!=e&&(!(e instanceof y)||e.disabled);)e=e.nextElementSibling;return e}get previousMenuItem(){let e=this.previousElementSibling;for(;null!=e&&(!(e instanceof y)||e.disabled);)e=e.previousElementSibling;return e}}customElements.define("active-dropdown-menu-item",y),document.addEventListener("keydown",(e=>{if(w&&!w.contains(document.activeElement))switch(e.key){case"Home":case"End":case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Tab":e.preventDefault(),w.focusDefaultItem();break;case"Escape":e.preventDefault(),w.close()}}));let k=new Map;class M extends HTMLFormElement{constructor(e){super(),this.setAttribute("is","active-dropdown-form-context");const{originalElement:t}=e;this.addEventListener("submit",(e=>{e.preventDefault(),this.#E.requestSubmit()})),this.id="dropdown_ctx_"+Date.now().toString(36)+Math.random().toString(36).substring(2),this.#E=t}#E;disconnectedCallback(){k.delete(this.#E)}}customElements.define("active-dropdown-form-context",M,{extends:"form"});const L=new ResizeObserver((e=>{for(const t of e)x(t.target,t.contentRect.width)}));function T(e){return!e.classList.contains("pattern-stretch")&&!e.classList.contains("pattern-repeat")}function x(e,t=e.clientWidth){T(e)||(e.classList.remove("pattern-stretch-auto"),L.unobserve(e));const n=t>10*e.clientHeight&&t<=32*e.clientHeight;e.classList.toggle("pattern-stretch-auto",n),P(e)}const C=new Map;function P(e,t=0){if(function(e,t=!1){const n=e.getBoundingClientRect();return t?n.top>=0&&n.left>=0&&n.bottom<=document.documentElement.clientHeight&&n.right<=document.documentElement.clientWidth:(n.top>=0&&n.top<=document.documentElement.clientHeight||n.bottom>=0&&n.bottom<=document.documentElement.clientHeight)&&(n.left>=0&&n.left<=document.documentElement.clientWidth||n.right>=0&&n.right<=document.documentElement.clientWidth)}(e)&&(e.classList.contains("pattern-stretch-auto")||e.classList.contains("pattern-stretch"))){let n=C.get(e)||0;const i=n,s=e.getBoundingClientRect();if(s.height<8||s.height%1!=0)return;const o=s.top;n-=o%1,n<-.5&&(n+=1),e.style.transform=0==n?"":"translate(0px, "+n+"px)",C.set(e,n);const r=e.getBoundingClientRect().top;r%1!=0?(t>1&&console.warn("What the hell? The <hr> sub-pixel correction didn't work even after a retry. oldTopPos: "+o+"px newTopPos: "+r+"px oldYTranslation: "+i+"px newYTranslation: "+n+"px retries: "+t),t<6?P(e,t+1):console.warn("I... give up")):t>1&&console.info("Ended up working... oldTopPos: "+o+"px newTopPos: "+r+"px oldYTranslation: "+i+"px newYTranslation: "+n+"px retries: "+t)}else t>1&&console.info("Disregard the previous message... turns out it was outside the viewport."),e.style.transform=""}function N(){new MutationObserver((e=>{for(let t=0;t<e.length;t+=1){const n=e[t];switch(n.type){case"attributes":if(!(n.target instanceof HTMLHRElement))continue;T(n.target)&&(L.observe(n.target),x(n.target));break;case"childList":n.addedNodes.forEach((e=>{e instanceof HTMLHRElement&&T(e)&&(L.observe(e),x(e))})),n.removedNodes.forEach((e=>{e instanceof HTMLHRElement&&(L.unobserve(e),C.delete(e))}))}}})).observe(document.body,{subtree:!0,childList:!0,attributeFilter:["class"]}),function(){for(const e of document.getElementsByTagName("hr"))T(e)&&(L.observe(e),x(e))}()}document.addEventListener("scrollend",(e=>{for(const e of document.querySelectorAll("hr.pattern-stretch-auto, hr.pattern-stretch"))P(e)})),"complete"!=document.readyState?window.addEventListener("load",N):N();const A=document.createElement("div");function S(){const e=document.createElement("div");return e.style.position="absolute",e.classList.add("cicon-fantasy-marker-up"),e.style.top="0px",e}function H(e){if("range"!=e.type||null==e.list)return;const t=""==e.min||isNaN(e.min)?0:Number(e.min),n=""==e.max||isNaN(e.max)?100:Number(e.max),i=e.getBoundingClientRect(),s=Math.ceil(i.bottom+window.scrollY+4),o=Math.round(i.left+window.scrollX+8-4),r=Math.round(i.width-16+8);A.style.top=s+"px",A.style.left=o+"px",A.style.height="8px",A.style.width=r+"px",A.innerHTML="";const a=r-8,l=n-t;for(const i of e.list.options){const e=Number(i.value);if(isNaN(e)||e<t||e>n)continue;const s=(e-t)/l*a,o=S();o.style.left=s+"px",A.appendChild(o)}document.body.appendChild(A)}function O(){A.isConnected&&(A.innerHTML="",A.remove())}A.classList.add("cicon"),A.classList.add("range-input-marker"),A.style.position="absolute",A.style.zIndex=2**30+"",A.style.fontSize="8px",A.style.pointerEvents="none",A.inert=!0,document.addEventListener("focusin",(e=>{e.target instanceof HTMLInputElement&&H(e.target)})),document.addEventListener("mousedown",(e=>{document.activeElement instanceof HTMLInputElement&&H(document.activeElement)})),document.addEventListener("mouseup",O),document.addEventListener("focusout",O);const D={attributeFilter:["data-value"]};Object.freeze(D.attributeFilter),Object.freeze(D);const R=new ResizeObserver((e=>{for(const t of e)t.target.refreshMarkerPosition()}));class I extends HTMLMenuElement{static get observedAttributes(){return["disabled","selected-value"]}constructor(){super(),this.addEventListener("click",(e=>{if(!this.disabled)for(const t of this.children)t instanceof HTMLLIElement&&t.contains(e.target)&&(this.selectedValue=t.dataset.value??null)})),this.addEventListener("keydown",(e=>{(" "==e.key||"Enter"==e.key)&&e.target instanceof HTMLLIElement&&e.target.parentElement==this&&(e.target.classList.add("active"),e.preventDefault())})),this.addEventListener("keyup",(e=>{(" "==e.key||"Enter"==e.key)&&e.target instanceof HTMLLIElement&&e.target.parentElement==this&&(e.target.classList.contains("active")&&(e.target.classList.remove("active"),e.target.dispatchEvent(_?new PointerEvent("click",{isPrimary:!0,bubbles:!0}):new MouseEvent("click",{bubbles:!0}))),e.preventDefault())})),new MutationObserver((e=>{for(const t of e){for(const e of t.removedNodes)e instanceof HTMLLIElement&&(e.tabIndex=-1,null!=e.dataset.value&&e.dataset.value==this.selectedValue&&this.dispatchEvent(new CustomEvent("fantasyTabSelected",{bubbles:!0,detail:{value:void 0}})));for(const e of t.addedNodes)e instanceof HTMLLIElement&&(this.disabled||(e.tabIndex=0),null!=e.dataset.value&&e.dataset.value==this.selectedValue&&(this.dispatchEvent(new CustomEvent("fantasyTabSelected",{bubbles:!0,detail:{value:e.dataset.value}})),e.classList.add("selected")));this.isConnected&&this.refreshMarkerPosition()}})).observe(this,{childList:!0})}refreshMarkerPosition(e){if(null==e&&(e=[...this.children].find((e=>e instanceof HTMLLIElement&&e.dataset.value==this.selectedValue))),null==e)return void this.style.setProperty("--tab-marker-opacity","0");this.style.setProperty("--tab-marker-opacity","1");const t=this.getBoundingClientRect(),n=e.getBoundingClientRect();this.style.setProperty("--tab-marker-offset-x",n.left-t.left+n.width/2-8+"px"),this.style.setProperty("--tab-marker-offset-y",n.top-t.top-36+"px")}connectedCallback(){R.observe(this);const e=this.disabled;for(const t of this.children)t instanceof HTMLLIElement&&(t.tabIndex=e?-1:0)}disconnectedCallback(){R.unobserve(this)}get selectedValue(){return this.getAttribute("selected-value")}set selectedValue(e){null==e?this.removeAttribute("selected-value"):this.setAttribute("selected-value",e)}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}attributeChangedCallback(e,t,n){if("disabled"==e){const e=this.disabled;for(const t of this.children)t instanceof HTMLLIElement&&(t.tabIndex=e?-1:0);return}if("selected-value"!=e)return;let i,s=!1,o=!1;for(const e of this.children)e instanceof HTMLLIElement&&(s=s||null!=t&&t==e.dataset.value,null!=n&&n==e.dataset.value?(i=e,o=!0,e.classList.add("selected"),this.refreshMarkerPosition(e)):e.classList.remove("selected"));(s||o)&&(i??this).dispatchEvent(new CustomEvent("fantasyTabSelected",{bubbles:!0,detail:{value:o?n:void 0}}))}}(async function(){(function(){try{const e="test-button-"+Date.now().toString(36);class t extends HTMLButtonElement{}customElements.define(e,t,{extends:"button"});const n=document.createElement("button",{is:e});return!(n instanceof HTMLButtonElement&&n instanceof t)}catch(e){return!0}})()&&(Function.prototype(await r.e(316).then(r.t.bind(r,316,19))),d||(d=r.e(316).then(r.t.bind(r,316,19))),await d)})().then((()=>{customElements.define("fantasy-tabs",I,{extends:"menu"})}));let _=!1;document.addEventListener("click",(e=>{e.isTrusted&&(_="undefined"!=typeof PointerEvent&&Object.getPrototypeOf(e).constructor==PointerEvent)}));const W=new Set;function B(e,t){const n=u("#main_loading_cover");n instanceof HTMLDialogElement&&(W.has(n)||(n.addEventListener("cancel",h),n.addEventListener("submit",h),W.add(n)));const i=u("#main_loading_text");if(n&&i)if(e){if(v.getActiveRoot()?.close(),n.ariaLive="assertive",t?(n.ariaLabel=null,n.setAttribute("aria-labelledby","main_loading_text"),i.innerText=t):(n.ariaLabel="Please wait",n.removeAttribute("aria-labelledby"),i.innerHTML=""),n instanceof HTMLDialogElement)try{n.showModal()}catch(e){n.close(),n.showModal()}else n.role="alert",document.activeElement.blur();n.inert=!1}else n instanceof HTMLDialogElement?n.close():n.role=null,n.inert=!0}function j(){document.body.addEventListener("focusin",(e=>{const t=u("#main_loading_cover");t instanceof HTMLDialogElement||t.inert||document.activeElement.blur()}))}"loading"==document.readyState?document.addEventListener("DOMContentLoaded",j):j();const F=[];class V{constructor(){void 0!==Symbol.dispose&&(this[Symbol.dispose]=this.hide)}#v="";set text(e){this.#v=e,F.length&&F[F.length-1]==this&&B(!0,this.#v)}get text(){return this.#v}show(){const e=F.indexOf(this);-1==e?F.push(this):F.push(...F.splice(e,1)),B(!0,this.#v)}hide(){const e=F.indexOf(this);-1!=e&&F.splice(e,1),F.length?B(!0,F[F.length-1].#v):B(!1)}}const z=new V;function q(e,t,n){const i=document.createElement(t);i.classList.value="button-row equal-width",i instanceof HTMLFormElement&&(i.method="dialog");for(const t of e){const e=document.createElement("button");t.class&&(e.classList.value=t.class),e.classList.add("small"),t.returnValue&&(e.value=t.returnValue),e.innerText=t.text,t.focus&&(e.autofocus=!0),n&&(e.name=n),i.appendChild(e)}return i}function $(e,t){for(const n of t.split("\n").map((e=>e.trim())).filter(Boolean)){const t=document.createElement("p");t.innerText=n,e.appendChild(t)}}function Y(e,t,n,i,s,o){const r=function(e,t,n,i,s,o){const r=document.createElement("dialog");if(s&&(r.classList.value=s),e){const t=document.createElement("h1");t.innerText=e,r.appendChild(t)}if(i){const e=document.createElement("span");e.classList.add("dialog-cicon"),e.classList.add("cicon-"+i),r.appendChild(e)}if(Array.isArray(t)?r.append(...t):"object"==typeof t?r.append(t):$(r,t+""),o){const e=document.createElement("textarea");e.value=o,e.readOnly=!0,r.appendChild(e)}return r.appendChild(q(n,"form")),r}(e,t,n,i,s,o);return document.body.append(r),r.showModal(),new Promise((e=>{r.addEventListener("close",(t=>{e(r.returnValue),r.remove()}))}))}async function X(e,t,n,i,s){null==t&&(t=e,e=""),await Y(e,t,[{text:"OK",focus:!0}],n,i,s)}async function U(e,t,n,i,s="Cancel",o="OK",r){return null==t&&(t=e,e=""),Boolean(await Y(e,t,[{text:s},{text:o,focus:!0,returnValue:"1",class:"primary"}],n,i,r))}const K=[];function G(e){let t="**** Error details ****\n";return"object"==typeof e||"function"==typeof e?("string"==typeof e.name&&"string"==typeof e.message?t+="Name: "+e.name+"\nMessage: "+e.message.replace(/\t/g,"    ")+"\nStack: "+(e.stack+"").replace(/\t/g,"    ")+"\n":t+="Non-error "+typeof e+" was thrown!\n",t+="*** Object properties ***\n"+JSON.stringify(e,void 0,"    ")):t+=typeof e+" was thrown with (stringified) value: "+e+"\n",t}async function J(e){for(let t=K.length-1;t>=0;t-=1){const n=K[t](e);if(null!=n)try{return await X(n.title,n.message,n.dialogIcon,n.dialogClass,n.hideDetails?void 0:G(e))}catch(e){console.error('errorMsgBox: there was an errorFormatter named "'+K[t].name+'" which turned out to be fallible.',"It threw the following:",e)}}"object"!=typeof e&&"function"!=typeof e||"string"!=typeof e.name||"string"!=typeof e.message?await X("Non-error object error","An unknown error has occurred.","tired","danger",G(e)):await X(e.name,e.message||"[No error message]","tired","danger",G(e))}function Q(e){return new Promise((t=>setTimeout(t,e)))}function Z(e){return/^[0-9.]+px$/.test(e)?Number(e.substring(0,e.length-2)):NaN}class ee extends HTMLElement{constructor(){super(),this.#y=new ResizeObserver((()=>{if(this.correctWidth(),this.style.width){const t=e(getComputedStyle(this).getPropertyValue("--div-transitionful-resize-time"));setTimeout((()=>{this.correctHeight()}),t)}}))}connectedCallback(){this.style.height=this.getBoundingClientRect().height+"px",this.#y.observe(this.parentElement)}disconnectedCallback(){this.#y.disconnect()}correctWidth(){if(null==this.lastElementChild)return;const e=getComputedStyle(this),t=getComputedStyle(this.lastElementChild);switch(this.#k){case"none":this.style.width="";break;case"child-width":{const n=(Z(t.marginRight)||0)+(Z(e.paddingRight)||0)+(Z(e.borderRightWidth)||0),i=this.lastElementChild.getBoundingClientRect().right-this.getBoundingClientRect().left+n;this.style.width=i+"px";break}case"max-width":{const t=Z(e.maxWidth);if(isNaN(t)){this.style.width="";break}this.style.width=t+"px";break}}}correctHeight(){if(null==this.lastElementChild)return;const e=getComputedStyle(this),t=(Z(getComputedStyle(this.lastElementChild).marginBottom)||0)+(Z(e.paddingBottom)||0)+(Z(e.borderBottomWidth)||0),n=this.lastElementChild.getBoundingClientRect().bottom-this.getBoundingClientRect().top+t;this.style.height=n+"px"}transitionSwapLastElement(e,t="none"){this.#M=e,this.#k=t,this.#L()}#y;#M=document.createElement("div");#k="none";#T=!1;#L(){if(this.#T)return;this.#T=!0;const t=getComputedStyle(this);(async()=>{for(;;){if(this.lastElementChild==this.#M)return void(this.#T=!1);null==this.lastElementChild&&this.appendChild(document.createElement("div"));const n=e(t.getPropertyValue("--div-transitionful-fade-time")),i=e(t.getPropertyValue("--div-transitionful-resize-time"));let s=this.lastElementChild;s.style.animation="var(--div-transitionful-fade-time) ease-in normal forwards 0s div-transitionful-fade-out",await Q(n),s.remove(),s.style.animation="",s=this.#M,s.style.opacity="0",this.appendChild(s),this.correctWidth(),this.style.width&&await Q(i),this.correctHeight(),s.style.opacity="",s.style.animation="var(--div-transitionful-fade-time) ease-out normal 0s div-transitionful-fade-in"}})()}}customElements.define("div-transitionful",ee);const te=new Set(["follow-cursor-vars"]);let ne=0,ie=0,se=0;const oe=new Map,re=new Set;function ae(e){e.addEventListener("mouseenter",ue,{passive:!0}),e.addEventListener("mouseleave",he,{passive:!0}),re.add(e),e==document.documentElement?(e.style.setProperty("--cursor-window-pos-fade-fraction","0"),e.style.setProperty("--cursor-window-pos-fade-percentage","0%")):(e.style.setProperty("--cursor-pos-fade-fraction","0"),e.style.setProperty("--cursor-pos-fade-percentage","0%")),pe(e),e.matches(":hover")&&ce(e)}function le(e){e.removeEventListener("mouseenter",ue),e.removeEventListener("mouseleave",he),e.matches(":hover")&&de(e),re.delete(e)}function ce(t){const n=getComputedStyle(t);let i=e(n.getPropertyValue("--cursor-fade-in-time"));(isNaN(i)||i<0)&&(i=0);const s=oe.get(t);if(s){let e=(ne-s.fadeStartTime)/s.fadeTime;e>1&&(e=1),s.fadeStartTime=ne-i*(1-e),s.fadeTime=i,s.fadingOut=!1}else oe.set(t,{fadeStartTime:ne,fadeTime:i,timingFunction:l(n.getPropertyValue("--cursor-fade-function"))??l("linear"),fadingOut:!1})}function de(t){const n=getComputedStyle(t);let i=e(n.getPropertyValue("--cursor-fade-out-time"));(isNaN(i)||i<0)&&(i=0);const s=oe.get(t);if(s){let e=(ne-s.fadeStartTime)/s.fadeTime;e>1&&(e=1),s.fadeStartTime=ne-i*(1-e),s.fadeTime=i,s.fadingOut=!0}else oe.set(t,{fadeStartTime:ne,fadeTime:i,timingFunction:l(n.getPropertyValue("--cursor-fade-function"))??l("linear"),fadingOut:!0})}function ue(e){ce(e.target)}function he(e){de(e.target)}function me(){te.forEach((e=>{for(const t of document.getElementsByClassName(e))oe.has(t)||ae(t)}))}function pe(e){if(e==document.documentElement){const t=ie/window.innerWidth,n=se/window.innerHeight;e.style.setProperty("--cursor-window-pos-x-px",ie+"px"),e.style.setProperty("--cursor-window-pos-y-px",se+"px"),e.style.setProperty("--cursor-window-pos-x-fraction",t+""),e.style.setProperty("--cursor-window-pos-y-fraction",n+""),e.style.setProperty("--cursor-window-pos-x-percentage",100*t+"%"),e.style.setProperty("--cursor-window-pos-y-percentage",100*n+"%")}else{const t=e.getBoundingClientRect(),n=ie-t.left,i=se-t.top,s=n/t.width,o=i/t.height;e.style.setProperty("--cursor-pos-x-px",n+"px"),e.style.setProperty("--cursor-pos-y-px",i+"px"),e.style.setProperty("--cursor-pos-x-fraction",s+""),e.style.setProperty("--cursor-pos-y-fraction",o+""),e.style.setProperty("--cursor-pos-x-percentage",100*s+"%"),e.style.setProperty("--cursor-pos-y-percentage",100*o+"%")}}function ge(){document.documentElement.addEventListener("mousemove",(e=>{ie=e.clientX,se=e.clientY,re.forEach((e=>{(oe.has(e)||e.matches(":hover"))&&pe(e)}))}),{passive:!0});const e=new MutationObserver((e=>{for(let t=0;t<e.length;t+=1){const n=e[t];if(n.target instanceof HTMLElement||n.target instanceof SVGElement)switch(n.type){case"attributes":{const e=n.target,t=![...te].every((t=>!e.classList.contains(t)));re.has(e)?t||le(e):t&&ae(e);break}case"childList":n.addedNodes.forEach((e=>{(e instanceof HTMLElement||e instanceof SVGElement)&&([...te].every((t=>!e.classList.contains(t)))||ae(e))})),n.removedNodes.forEach((e=>{(e instanceof HTMLElement||e instanceof SVGElement)&&re.has(e)&&le(e)}))}}}));e.observe(document.body,{subtree:!0,childList:!0,attributeFilter:["class"]}),e.observe(document.documentElement,{attributeFilter:["class"]}),me()}requestAnimationFrame((function e(t){ne=t,requestAnimationFrame(e),oe.forEach(((e,t)=>{const n=(ne-e.fadeStartTime)/e.fadeTime;n>=1&&oe.delete(t);const i=e.timingFunction(e.fadingOut?1-n:n);t==document.documentElement?(document.documentElement.style.setProperty("--cursor-window-pos-fade-fraction",i+""),document.documentElement.style.setProperty("--cursor-window-pos-fade-percentage",100*i+"%")):(t.style.setProperty("--cursor-pos-fade-fraction",i+""),t.style.setProperty("--cursor-pos-fade-percentage",100*i+"%"))}))})),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",ge):ge();const fe=new Promise((e=>{window.addEventListener("touchstart",(()=>{e("touch")}),{once:!0,passive:!0}),window.addEventListener("mousemove",(()=>{e("mouse")}),{once:!0,passive:!0})})),be=new Promise((e=>{"complete"==document.readyState?e():window.addEventListener("load",(t=>{setTimeout(e,2500)}))}));function we(){localStorage.getItem("user_denied_fancy_background")||(X("Device orientation access denied","The background could react to your device's accelerometer, but permission to access the accelerometer data was denied.","info"),localStorage.setItem("user_denied_fancy_background","1"))}function Ee(){const e=u("#app_tab_container_test"),t=u("#app_tab_container_test_b1"),n=u("#app_tab_container_test_b2"),i=u("#app_tab_container_test_b3");e instanceof ee&&t instanceof HTMLButtonElement&&n instanceof HTMLButtonElement&&i instanceof HTMLButtonElement&&(e.style.maxWidth="calc(100vw - 16px);",t.addEventListener("click",(t=>{const n=document.createElement("div");n.classList.add("test-boxes"),n.style.backgroundColor="#ff0000",n.style.margin="18px",e.transitionSwapLastElement(n,"child-width")})),n.addEventListener("click",(t=>{const n=document.createElement("div");for(let e=0;e<2;e+=1){const e=document.createElement("div");e.classList.add("test-boxes"),e.style.backgroundColor="#ff0000",e.style.margin="8px",n.appendChild(e)}e.transitionSwapLastElement(n,"max-width")})),i.addEventListener("click",(t=>{const n=document.createElement("div");for(let e=0;e<25;e+=1){const e=document.createElement("h3");e.innerText="AAAAAAAAAAAAAA",n.appendChild(e)}e.transitionSwapLastElement(n,"max-width")})))}(async function(){CSS.supports("selector(input::-moz-range-progress)")||(c||(c=r.e(486).then(r.bind(r,486))),await c)})(),window.$alert=X,window.$confirm=U,window.$prompt=async function(e,t="",n,i,s,o="Cancel",r="OK"){const a=null==n?"":e,l=null==n?e:t,c=document.createElement("dialog");if(s&&(c.classList.value=s),a){const e=document.createElement("h1");e.innerText=a,c.appendChild(e)}if(i){const e=document.createElement("span");e.classList.add("dialog-cicon"),e.classList.add("cicon-"+i),c.appendChild(e)}Array.isArray(l)?c.append(...l):"object"==typeof l?c.append(l):$(c,l+"");const d=document.createElement("form");d.method="dialog";const u=document.createElement("input");u.name="prompt",u.type="text",u.style.width="100%",u.style.marginBottom="8px",u.value=null==n?"string"==typeof t?t:"":n,d.appendChild(u);const h=document.createElement("input");return h.type="submit",h.hidden=!0,d.appendChild(h),d.appendChild(q([{text:o,returnValue:"0"},{text:r,returnValue:"1",class:"primary"}],"div","confirm")),c.appendChild(d),new Promise((e=>{c.addEventListener("submit",(t=>{const n=function(e){const t={},[n,i]=e instanceof HTMLFormElement?[e,null]:[e.target,e.submitter],s=new Set;for(let e=0;e<n.elements.length;e+=1){const o=n.elements[e];if(o instanceof HTMLButtonElement)o==i&&o.name&&(t[o.name]=o.value);else if(o instanceof HTMLInputElement)switch(o.type){case"checkbox":o.indeterminate?t[o.name]=null:t[o.name]=o.checked;break;case"datetime-local":t[o.name]=o.valueAsDate;break;case"file":t[o.name]=o.files;break;case"number":case"range":t[o.name]=o.valueAsNumber;break;case"radio":o.checked?t[o.name]=o.value:s.add(o.name);break;default:t[o.name]=o.value}else(o instanceof HTMLOutputElement||o instanceof HTMLSelectElement||o instanceof HTMLTextAreaElement)&&(t[o.name]=o.value)}return s.forEach((e=>{t[e]||(t[e]="")})),t}(t);"0"!=n.confirm?e(n.prompt+""):e(null)})),c.addEventListener("close",(t=>{c.remove(),e(null)})),document.body.append(c),c.showModal(),u.focus(),u.setSelectionRange(0,1/0)}))},window.$msgBox=Y,window.$errorMsgBox=J,window.$msgBoxIfThrow=function(e){try{const t=e();null!=t&&"object"==typeof t&&"function"==typeof t.catch&&t.catch(J)}catch(e){J(e)}},window.$addErrorMsgFormatter=function(e){K.push(e)},window.$setLoading=function(e,t=""){e?(z.text=t,z.show()):z.hide()},window.$FullscreenLoadingTask=V,"loading"==document.readyState?document.addEventListener("DOMContentLoaded",Ee):Ee(),async function(e=!1){if("mouse"==await fe)return await be,["fancy-background"].forEach((e=>te.add(e))),void me();if("undefined"!=typeof DeviceOrientationEvent&&(window.addEventListener("deviceorientation",(e=>{let t,n=e.beta??90;switch(screen.orientation.type){case"landscape-secondary":n*=-1;case"landscape-primary":Math.abs(n)<5?(n-=5,n/=-10):Math.abs(n)>175?(n=n<0?Math.abs(175+n):185-n,n/=10):(n<0&&(n=180-n),n-=5,n/=170),t=e.gamma??90,t+=90,t/=180;break;case"portrait-primary":case"portrait-secondary":n=e.gamma??90,n<0&&(n=180+n),t=e.beta??90,t%=90,t+=90,t/=180;break;default:n=.5,t=.5}document.documentElement.style.setProperty("--fancy-background-pos-x-fraction",t+""),document.documentElement.style.setProperty("--fancy-background-pos-y-fraction",n+""),document.documentElement.style.setProperty("--fancy-background-pos-x-percentage",100*t+"%"),document.documentElement.style.setProperty("--fancy-background-pos-y-percentage",100*n+"%"),document.documentElement.style.setProperty("--fancy-background-pos-fade-fraction","1")})),"function"==typeof DeviceOrientationEvent.requestPermission))switch(await DeviceOrientationEvent.requestPermission()){case"prompt":if(!e||!await U("Device orientation access requested","The background can react to your device's accelerometer.\nWould you like to see it?","question"))return;switch(await DeviceOrientationEvent.requestPermission()){case"prompt":X("Something weird happened","Your device asked me to prompt for permissions again, not sure how to handle this situation.");break;case"denied":e&&we()}break;case"denied":e&&we()}}(!0)})()})();
